<!DOCTYPE html>
<html lang="en"><head>
<script src="DrugUtilisation_files/libs/clipboard/clipboard.min.js"></script>
<script src="DrugUtilisation_files/libs/quarto-html/tabby.min.js"></script>
<script src="DrugUtilisation_files/libs/quarto-html/popper.min.js"></script>
<script src="DrugUtilisation_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="DrugUtilisation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DrugUtilisation_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="DrugUtilisation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">
<title>DrugUtilisation</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="DrugUtilisation_files/libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="DrugUtilisation_files/libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
<link rel="stylesheet" href="DrugUtilisation_files/libs/revealjs/dist/theme/quarto.css" id="theme">
<link href="DrugUtilisation_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="DrugUtilisation_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="DrugUtilisation_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="DrugUtilisation_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
<link href="DrugUtilisation_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
<link href="DrugUtilisation_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<script src="DrugUtilisation_files/libs/htmlwidgets-1.6.3/htmlwidgets.js"></script><script src="DrugUtilisation_files/libs/viz-1.8.2/viz.js"></script><link href="DrugUtilisation_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="DrugUtilisation_files/libs/grViz-binding-1.0.9/grViz.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section><section id="drugutilisation" class="title-slide slide level1 center"><h1>DrugUtilisation</h1>
<div class="cell">

</div>
<div style="margin-top: 25px;">

</div>
<p>Conduct Drug Utilisation Studies using the OMOP Common Data Model</p>
<div class="title-slide-logos">
<p><img src="images/hexticker.png" alt="Logo 1" class="logo"><img src="images/logoHDS.png" alt="Logo 2" class="logo"></p>
</div>
</section><section id="introduction" class="slide level2"><h2>Introduction</h2>
<p>Drug utilisation studies (DUS) were defined by the World Health Organization as studying the marketing, distribution, prescription, and use of medicinal products in a society, with special emphasis on the resulting medical and socioeconomic consequences (WHO, 2003).</p>
<div class="fragment">
<p>This package aims to standardise and provide the tools to conduct Drug Utilisation studies as of the Darwin-EU Catalogue of Standard Analytics.</p>
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="https://www.darwin-eu.org/templates/rt_horizon/custom/images/darwin-eu-logo.png" style="width:45.0%"></p>
</figure>
</div>
</div>
</section><section id="functionalities" class="slide level2"><h2>Functionalities</h2>
<ul>
<li class="fragment"><p>Create cohort of drug user</p></li>
<li class="fragment"><p>Compute daily dose for a given exposure.</p></li>
<li class="fragment"><p>Identify potential indications</p></li>
<li class="fragment"><p>Summarise drug use</p></li>
<li class="fragment"><p>Identify alternative treatments</p></li>
<li class="fragment"><p>Analyse treatment discontinuation (under development)</p></li>
</ul></section><section id="create-a-reference-to-a-cdm-object" class="slide level2"><h2>Create a reference to a cdm object</h2>
<p>For this example we are going to use</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r.duckdb.org/">duckdb</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/">CDMConnector</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/">here</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># downloadEunomiaData(pathToData = here(), overwrite = TRUE)</span></span>
<span><span class="co"># Sys.setenv("EUNOMIA_DATA_FOLDER" = here())</span></span>
<span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span><span class="op">(</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html">duckdb</a></span><span class="op">(</span><span class="op">)</span>, dbdir <span class="op">=</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/eunomiaDir.html">eunomia_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/cdm_from_con.html">cdmFromCon</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">db</span>, cdmSchema <span class="op">=</span> <span class="st">"main"</span>, writeSchema <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="fix-eunomia-problems-with-drugs" class="slide level2"><h2>Fix eunomia problems with drugs</h2>
<p>Add a drug_strength table:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/darwin-eu-dev/DrugUtilisation/main/extras/mock_drug_strength.csv"</span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/insertTable.html">insertTable</a></span><span class="op">(</span>cdm <span class="op">=</span> <span class="va">cdm</span>, name <span class="op">=</span> <span class="st">"drug_strength"</span>, table <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Fix quantity:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">drug_exposure</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">drug_exposure</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>quantity <span class="op">=</span> <span class="va">days_supply</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">compute</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"drug_exposure"</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="generate-a-drug-cohort" class="slide level2"><h2>Generate a drug cohort</h2>
<p>To generate a drug cohort we need a conceptSet (named list of concepts). Each element will be a different cohort, so we can instantiate multiple cohorts following the same logit at the same time.</p>
<p>Methods to create a conceptSet:</p>
<ul>
<li class="fragment"><p>read it from JSON <a href="https://darwin-eu.github.io/CodelistGenerator/reference/codesFromConceptSet.html">CodelistGenerator::codesFromConceptSet</a></p></li>
<li class="fragment"><p>create from an ingredient <a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html">CodelistGenerator::getDrugIngredientCodes</a></p></li>
<li class="fragment"><p>create from a text search <a href="https://darwin-eu.github.io/CodelistGenerator/reference/getCandidateCodes.html">CodelistGenerator::getCandidateCodes</a></p></li>
<li class="fragment"><p>custom creation</p></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">codelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>concept1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>, concept2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">codelist</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$concept1
[1] 1 2 3 4

$concept2
[1] 3 4 5</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">codelist</span> <span class="op">|&gt;</span> <span class="fu">omopgenerics</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/newCodelist.html">newCodelist</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
- concept1 (4 codes)
- concept2 (3 codes)</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-1" class="slide level2"><h2>Generate a drug cohort</h2>
<p>For this example we are going to use all records of <code>acteaminophen</code>:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CodelistGenerator/">CodelistGenerator</a></span><span class="op">)</span></span>
<span><span class="va">codelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html">getDrugIngredientCodes</a></span><span class="op">(</span><span class="va">cdm</span>, <span class="st">"acetaminophen"</span><span class="op">)</span></span>
<span><span class="va">codelist</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
- acetaminophen (7 codes)</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-2" class="slide level2"><h2>Generate a drug cohort</h2>
<p>Once we have our conceptSet we can create a simple cohort:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/">DrugUtilisation</a></span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"dus_cohort"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">codelist</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>The results is the cdm object with the new cohort instantiated.</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── # OMOP CDM reference (duckdb) of Synthea synthetic health database ────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,
procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location,
care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary,
domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map,
drug_strength</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• cohort tables: dus_cohort</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• achilles tables: -</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• other tables: -</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 4]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         
 1                    1         32 1998-10-02        1998-10-09     
 2                    1         97 2015-03-23        2015-04-06     
 3                    1        163 1975-04-26        1975-07-26     
 4                    1        183 1983-01-26        1983-02-09     
 5                    1        338 1995-06-01        1995-06-15     
 6                    1        351 1985-10-18        1985-11-01     
 7                    1        351 2017-11-17        2017-12-01     
 8                    1        364 1988-05-05        1988-05-12     
 9                    1        440 1983-09-18        1983-09-25     
10                    1        479 1989-05-11        1989-05-25     
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-3" class="slide level2"><h2>Generate a drug cohort</h2>
<p>We can check some metadata of the cohort:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/settings.html">settings</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 11
  cohort_definition_id cohort_name   duration_range_min duration_range_max impute_duration gap_era prior_use_washout
                 &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;              &lt;chr&gt;              &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;            
1                    1 acetaminophen 1                  Inf                none            0       0                
# ℹ 4 more variables: prior_observation &lt;chr&gt;, cohort_date_range_start &lt;chr&gt;, cohort_date_range_end &lt;chr&gt;, limit &lt;chr&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  cohort_definition_id number_records number_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;
1                    1          13908            2679</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-4" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  cohort_definition_id number_records number_subjects reason_id reason                    excluded_records excluded_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;             &lt;int&gt;
1                    1          13908            2679         1 Initial qualifying events                0                 0</code></pre>
</div>
</div>
</section><section id="generate-a-drug-cohort-5" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
  result_id cdm_name      group_name group_level strata_name strata_level variable_name variable_level estimate_name estimate_type
      &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        
1         1 Synthea synt… cohort_na… acetaminop… overall     overall      number_recor… &lt;NA&gt;           count         integer      
2         1 Synthea synt… cohort_na… acetaminop… overall     overall      number_subje… &lt;NA&gt;           count         integer      
3         2 Synthea synt… cohort_na… acetaminop… reason      Initial qua… number_recor… &lt;NA&gt;           count         integer      
4         2 Synthea synt… cohort_na… acetaminop… reason      Initial qua… number_subje… &lt;NA&gt;           count         integer      
5         2 Synthea synt… cohort_na… acetaminop… reason      Initial qua… excluded_rec… &lt;NA&gt;           count         integer      
6         2 Synthea synt… cohort_na… acetaminop… reason      Initial qua… excluded_sub… &lt;NA&gt;           count         integer      
# ℹ 3 more variables: estimate_value &lt;chr&gt;, additional_name &lt;chr&gt;, additional_level &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="generate-a-drug-cohort-6" class="slide level2"><h2>Generate a drug cohort</h2>
<p>Let’s explore the parameters:</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">generateDrugUtilisationCohortSet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><img data-src="arguments.png"></p>
</div>
</section><section id="generate-a-drug-cohort-7" class="slide level2"><h2>Generate a drug cohort</h2>

<img data-src="step1_darwin.png" class="r-stretch quarto-figure-center"></section><section id="generate-a-drug-cohort-8" class="slide level2"><h2>Generate a drug cohort</h2>

<img data-src="step2_darwin.png" class="r-stretch quarto-figure-center"></section><section id="generate-a-drug-cohort-9" class="slide level2"><h2>Generate a drug cohort</h2>

<img data-src="step3_darwin.png" class="r-stretch quarto-figure-center"></section><section id="generate-a-drug-cohort-10" class="slide level2"><h2>Generate a drug cohort</h2>

<img data-src="step4_darwin.png" class="r-stretch quarto-figure-center"></section><section id="generate-a-drug-cohort-11" class="slide level2"><h2>Generate a drug cohort</h2>

<img data-src="step5_darwin.png" class="r-stretch quarto-figure-center"></section><section id="generate-a-drug-cohort-12" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"dus_new_user"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">codelist</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span>, <span class="co"># 30 day separated prescriptions will be joined</span></span>
<span>  priorUseWashout <span class="op">=</span> <span class="fl">365</span>, <span class="co"># no use in the prior 365 days</span></span>
<span>  priorObservation <span class="op">=</span> <span class="fl">365</span>, <span class="co"># in the database for more than 365 dyas before start date</span></span>
<span>  cohortDateRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2000-01-01"</span>, <span class="st">"2019-12-31"</span><span class="op">)</span><span class="op">)</span>, <span class="co"># range of allowed dates</span></span>
<span>  limit <span class="op">=</span> <span class="st">"first"</span> <span class="co"># limit to only the first record per person</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="generate-a-drug-cohort-13" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/settings.html">settings</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 11
$ cohort_definition_id    &lt;int&gt; 1
$ cohort_name             &lt;chr&gt; "acetaminophen"
$ duration_range_min      &lt;chr&gt; "1"
$ duration_range_max      &lt;chr&gt; "Inf"
$ impute_duration         &lt;chr&gt; "none"
$ gap_era                 &lt;chr&gt; "30"
$ prior_use_washout       &lt;chr&gt; "365"
$ prior_observation       &lt;chr&gt; "365"
$ cohort_date_range_start &lt;chr&gt; "2000-01-01"
$ cohort_date_range_end   &lt;chr&gt; "2019-12-31"
$ limit                   &lt;chr&gt; "first"</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-14" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 3
$ cohort_definition_id &lt;int&gt; 1
$ number_records       &lt;int&gt; 1979
$ number_subjects      &lt;int&gt; 1979</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-15" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 7
Columns: 7
$ cohort_definition_id &lt;int&gt; 1, 1, 1, 1, 1, 1, 1
$ number_records       &lt;int&gt; 13908, 13860, 12907, 12533, 3332, 3332, 1979
$ number_subjects      &lt;int&gt; 2679, 2679, 2679, 2674, 1979, 1979, 1979
$ reason_id            &lt;int&gt; 1, 2, 3, 4, 5, 6, 7
$ reason               &lt;chr&gt; "Initial qualifying events", "join exposures separated by 30 or less days", "require prior use wash…
$ excluded_records     &lt;int&gt; 0, 48, 953, 374, 9201, 0, 1353
$ excluded_subjects    &lt;int&gt; 0, 0, 0, 5, 695, 0, 0</code></pre>
</div>
</div>
</div>
</section><section id="generate-a-drug-cohort-16" class="slide level2"><h2>Generate a drug cohort</h2>
<div class="cell">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-4fa0c2e86fc5753b2f03" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4fa0c2e86fc5753b2f03">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Initial events\nN subjects = 2,679\nN records = 13,908\", shape = \"box\", penwidth = \"2\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.6\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,7.1!\"] \n  \"2\" [label = \"N subjects = 2,679\nN records = 13,860\", shape = \"box\", penwidth = \"1\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.4\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,5.8!\"] \n  \"3\" [label = \"N subjects = 2,679\nN records = 12,907\", shape = \"box\", penwidth = \"1\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.4\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,4.6!\"] \n  \"4\" [label = \"N subjects = 2,674\nN records = 12,533\", shape = \"box\", penwidth = \"1\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.4\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,3.4!\"] \n  \"5\" [label = \"N subjects = 1,979\nN records = 3,332\", shape = \"box\", penwidth = \"1\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.4\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,2.2!\"] \n  \"6\" [label = \"N subjects = 1,979\nN records = 3,332\", shape = \"box\", penwidth = \"1\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.4\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,1!\"] \n  \"7\" [label = \"Final events\nN subjects = 1,979\nN records = 1,979\", shape = \"box\", penwidth = \"2\", color = \"black\", fontname = \"Calibri\", fontsize = \"11\", fontcolor = \"black\", height = \"0.6\", width = \"1.44\", fillcolor = \"#F0F8FF\", pos = \"1,-0.3!\"] \n  \"8\" [label = \"N subjects = 0\nN records = 48\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"9\", fontcolor = \"black\", height = \"0.4\", width = \"1.2\", fillcolor = \"#C0C0C0\", pos = \"3,6.4!\"] \n  \"9\" [label = \"join exposures separated by 30 or\nless days\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"10\", fontcolor = \"back\", height = \"0.4\", width = \"2.25\", fillcolor = \"#FFFFFF\", pos = \"1,6.4!\"] \n  \"10\" [label = \"N subjects = 0\nN records = 953\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"9\", fontcolor = \"black\", height = \"0.4\", width = \"1.2\", fillcolor = \"#C0C0C0\", pos = \"3,5.2!\"] \n  \"11\" [label = \"require prior use washout of 365\ndays\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"10\", fontcolor = \"back\", height = \"0.4\", width = \"2.25\", fillcolor = \"#FFFFFF\", pos = \"1,5.2!\"] \n  \"12\" [label = \"N subjects = 5\nN records = 374\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"9\", fontcolor = \"black\", height = \"0.4\", width = \"1.2\", fillcolor = \"#C0C0C0\", pos = \"3,4!\"] \n  \"13\" [label = \"require at least 365 prior\nobservation\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"10\", fontcolor = \"back\", height = \"0.4\", width = \"2.25\", fillcolor = \"#FFFFFF\", pos = \"1,4!\"] \n  \"14\" [label = \"N subjects = 695\nN records = 9201\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"9\", fontcolor = \"black\", height = \"0.4\", width = \"1.2\", fillcolor = \"#C0C0C0\", pos = \"3,2.8!\"] \n  \"15\" [label = \"restrict cohort_start_date on or\nafter 2000-01-01\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"10\", fontcolor = \"back\", height = \"0.4\", width = \"2.25\", fillcolor = \"#FFFFFF\", pos = \"1,2.8!\"] \n  \"16\" [label = \"N subjects = 0\nN records = 0\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"9\", fontcolor = \"black\", height = \"0.4\", width = \"1.2\", fillcolor = \"#C0C0C0\", pos = \"3,1.6!\"] \n  \"17\" [label = \"restrict cohort_end_date on or before\n2019-12-31\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"10\", fontcolor = \"back\", height = \"0.4\", width = \"2.25\", fillcolor = \"#FFFFFF\", pos = \"1,1.6!\"] \n  \"18\" [label = \"N subjects = 0\nN records = 1353\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"9\", fontcolor = \"black\", height = \"0.4\", width = \"1.2\", fillcolor = \"#C0C0C0\", pos = \"3,0.4!\"] \n  \"19\" [label = \"restric to first\nrecord\", shape = \"box\", color = \"black\", fontname = \"Calibri\", fontsize = \"10\", fontcolor = \"back\", height = \"0.4\", width = \"2.25\", fillcolor = \"#FFFFFF\", pos = \"1,0.4!\"] \n\"1\"->\"2\" [color = \"black\"] \n\"2\"->\"3\" [color = \"black\"] \n\"3\"->\"4\" [color = \"black\"] \n\"4\"->\"5\" [color = \"black\"] \n\"5\"->\"6\" [color = \"black\"] \n\"6\"->\"7\" [color = \"black\"] \n\"9\"->\"8\" [color = \"black\"] \n\"11\"->\"10\" [color = \"black\"] \n\"13\"->\"12\" [color = \"black\"] \n\"15\"->\"14\" [color = \"black\"] \n\"17\"->\"16\" [color = \"black\"] \n\"19\"->\"18\" [color = \"black\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="some-helpers" class="slide level2"><h2>Some helpers</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">generateIngredientCohortSet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">generateAtcCohortSet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="dealing-with-daily-dose" class="slide level2"><h2>Dealing with daily dose</h2>
<p><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html">addDailyDose</a></p>
<p>This function works if:</p>
<ul>
<li class="fragment">The relation between the <code>drug_concept_id</code> and <code>ingredient_concept_id</code>, can be established though <code>drug_strength</code> table by one of the 126 identified valid patterns. And if they have a formula assigned. Currently 17 patterns have a formula assigned you can check them here:</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">patternsWithFormula</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 41 × 9
   pattern_id amount amount_unit        numerator numerator_unit          denominator denominator_unit  formula_name       formula
        &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;                   &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;  
 1          1 &lt;NA&gt;   &lt;NA&gt;               number    microgram               number      hour              time based with d… if (de…
 2          2 &lt;NA&gt;   &lt;NA&gt;               number    milligram               number      hour              time based with d… if (de…
 3          3 &lt;NA&gt;   &lt;NA&gt;               number    unit                    number      hour              time based with d… if (de…
 4          4 &lt;NA&gt;   &lt;NA&gt;               number    microgram               &lt;NA&gt;        hour              time based no den… 24 * n…
 5          5 &lt;NA&gt;   &lt;NA&gt;               number    milligram               &lt;NA&gt;        hour              time based no den… 24 * n…
 6          6 number international unit &lt;NA&gt;      &lt;NA&gt;                    &lt;NA&gt;        &lt;NA&gt;              fixed amount form… quanti…
 7          7 number microgram          &lt;NA&gt;      &lt;NA&gt;                    &lt;NA&gt;        &lt;NA&gt;              fixed amount form… quanti…
 8          8 number milliequivalent    &lt;NA&gt;      &lt;NA&gt;                    &lt;NA&gt;        &lt;NA&gt;              fixed amount form… quanti…
 9          9 number milligram          &lt;NA&gt;      &lt;NA&gt;                    &lt;NA&gt;        &lt;NA&gt;              fixed amount form… quanti…
10         10 number milliliter         &lt;NA&gt;      &lt;NA&gt;                    &lt;NA&gt;        &lt;NA&gt;              fixed amount form… quanti…
11         11 number unit               &lt;NA&gt;      &lt;NA&gt;                    &lt;NA&gt;        &lt;NA&gt;              fixed amount form… quanti…
12         12 &lt;NA&gt;   &lt;NA&gt;               number    international unit      number      milligram         concentration for… quanti…
13         13 &lt;NA&gt;   &lt;NA&gt;               number    international unit      number      milliliter        concentration for… quanti…
14         14 &lt;NA&gt;   &lt;NA&gt;               number    milliequivalent         number      milliliter        concentration for… quanti…
15         15 &lt;NA&gt;   &lt;NA&gt;               number    milligram               number      Actuation         concentration for… quanti…
16         16 &lt;NA&gt;   &lt;NA&gt;               number    milligram               number      liter             concentration for… quanti…
17         17 &lt;NA&gt;   &lt;NA&gt;               number    milligram               number      milligram         concentration for… quanti…
18         18 &lt;NA&gt;   &lt;NA&gt;               number    milligram               number      milliliter        concentration for… quanti…
19         19 &lt;NA&gt;   &lt;NA&gt;               number    milligram               number      square centimeter concentration for… quanti…
20         20 &lt;NA&gt;   &lt;NA&gt;               number    milliliter              number      milligram         concentration for… quanti…
21         21 &lt;NA&gt;   &lt;NA&gt;               number    milliliter              number      milliliter        concentration for… quanti…
22         22 &lt;NA&gt;   &lt;NA&gt;               number    unit                    number      Actuation         concentration for… quanti…
23         23 &lt;NA&gt;   &lt;NA&gt;               number    unit                    number      milligram         concentration for… quanti…
24         24 &lt;NA&gt;   &lt;NA&gt;               number    unit                    number      milliliter        concentration for… quanti…
25         25 &lt;NA&gt;   &lt;NA&gt;               number    unit                    number      square centimeter concentration for… quanti…
26         26 &lt;NA&gt;   &lt;NA&gt;               number    international unit      &lt;NA&gt;        milligram         concentration for… quanti…
27         27 &lt;NA&gt;   &lt;NA&gt;               number    international unit      &lt;NA&gt;        milliliter        concentration for… quanti…
28         28 &lt;NA&gt;   &lt;NA&gt;               number    mega-international unit &lt;NA&gt;        milliliter        concentration for… quanti…
29         29 &lt;NA&gt;   &lt;NA&gt;               number    milliequivalent         &lt;NA&gt;        milligram         concentration for… quanti…
30         30 &lt;NA&gt;   &lt;NA&gt;               number    milliequivalent         &lt;NA&gt;        milliliter        concentration for… quanti…
31         31 &lt;NA&gt;   &lt;NA&gt;               number    milligram               &lt;NA&gt;        Actuation         concentration for… quanti…
32         32 &lt;NA&gt;   &lt;NA&gt;               number    milligram               &lt;NA&gt;        liter             concentration for… quanti…
33         33 &lt;NA&gt;   &lt;NA&gt;               number    milligram               &lt;NA&gt;        milligram         concentration for… quanti…
34         34 &lt;NA&gt;   &lt;NA&gt;               number    milligram               &lt;NA&gt;        milliliter        concentration for… quanti…
35         35 &lt;NA&gt;   &lt;NA&gt;               number    milligram               &lt;NA&gt;        square centimeter concentration for… quanti…
36         36 &lt;NA&gt;   &lt;NA&gt;               number    milliliter              &lt;NA&gt;        milligram         concentration for… quanti…
37         37 &lt;NA&gt;   &lt;NA&gt;               number    milliliter              &lt;NA&gt;        milliliter        concentration for… quanti…
38         38 &lt;NA&gt;   &lt;NA&gt;               number    unit                    &lt;NA&gt;        Actuation         concentration for… quanti…
39         39 &lt;NA&gt;   &lt;NA&gt;               number    unit                    &lt;NA&gt;        milligram         concentration for… quanti…
40         40 &lt;NA&gt;   &lt;NA&gt;               number    unit                    &lt;NA&gt;        milliliter        concentration for… quanti…
41         41 &lt;NA&gt;   &lt;NA&gt;               number    unit                    &lt;NA&gt;        square centimeter concentration for… quanti…</code></pre>
</div>
</div>
</div>
</section><section id="daily-dose" class="slide level2"><h2>daily dose</h2>
<p>We can add daily dose to drug_exposure like this:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">drug_exposure</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html">addDailyDose</a></span><span class="op">(</span>ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 25
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
$ drug_exposure_id             &lt;int&gt; 47027, 10459, 10524, 9646, 9653, 31813, 13969, 60871, 14061, 60753, 6923, 47028, 10525, 340…
$ person_id                    &lt;int&gt; 3895, 871, 877, 806, 806, 2636, 1169, 5063, 1175, 5051, 582, 3896, 877, 2815, 1746, 2230, 2…
$ drug_concept_id              &lt;int&gt; 40162522, 1127078, 1127433, 1127078, 40229134, 1127433, 1127433, 1127433, 40231925, 1127433…
$ drug_exposure_start_date     &lt;date&gt; 1982-03-30, 1967-11-09, 1992-05-28, 1962-07-02, 2009-01-18, 2017-08-22, 1937-12-03, 2010-0…
$ drug_exposure_start_datetime &lt;dttm&gt; 1982-03-30, 1967-11-09, 1992-05-28, 1962-07-02, 2009-01-18, 2017-08-22, 1937-12-03, 2010-0…
$ drug_exposure_end_date       &lt;date&gt; 1982-03-30, 1968-01-08, 1992-06-11, 1962-07-30, 2009-01-25, 2017-09-05, 1937-12-17, 2010-0…
$ drug_exposure_end_datetime   &lt;dttm&gt; 1982-03-30, 1968-01-08, 1992-06-11, 1962-07-30, 2009-01-25, 2017-09-05, 1937-12-17, 2010-0…
$ verbatim_end_date            &lt;date&gt; NA, 1968-01-08, 1992-06-11, 1962-07-30, 2009-01-25, 2017-09-05, 1937-12-17, 2010-06-04, NA…
$ drug_type_concept_id         &lt;int&gt; 38000177, 38000177, 38000177, 38000177, 38000177, 38000177, 38000177, 38000177, 38000177, 3…
$ stop_reason                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ refills                      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ quantity                     &lt;int&gt; 0, 60, 14, 28, 7, 14, 14, 14, 0, 35, 7, 14, 14, 7, 14, 30, 7, 14, 7, 21, 14, 7, 14, 35, 14,…
$ days_supply                  &lt;int&gt; 0, 60, 14, 28, 7, 14, 14, 14, 0, 35, 7, 14, 14, 7, 14, 30, 7, 14, 7, 21, 14, 7, 14, 35, 14,…
$ sig                          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ route_concept_id             &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ lot_number                   &lt;chr&gt; "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "…
$ provider_id                  &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ visit_occurrence_id          &lt;int&gt; 259023, 57955, 58440, 53468, 53505, 174469, 77028, 336572, 77481, 335907, 38579, 259140, 58…
$ visit_detail_id              &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ drug_source_value            &lt;chr&gt; "857005", "282464", "313782", "282464", "1043400", "313782", "313782", "313782", "1049221",…
$ drug_source_concept_id       &lt;int&gt; 40162522, 1127078, 1127433, 1127078, 40229134, 1127433, 1127433, 1127433, 40231925, 1127433…
$ route_source_value           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ dose_unit_source_value       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ daily_dose                   &lt;dbl&gt; NA, 157.37705, 303.33333, 154.48276, 18.98750, 303.33333, 303.33333, 303.33333, NA, 315.972…
$ unit                         &lt;chr&gt; "milligram", "milligram", "milligram", "milligram", "milligram", "milligram", "milligram", …</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>!! As drug exposure is a big table it is not recommended to add daily dose to the whole <code>drug_exposure</code> table, first it is important to subset to the subjects and concepts of interest.</p>
</div>
</section><section id="daily-dose-1" class="slide level2"><h2>daily dose</h2>
<p>To see the coverage of an specific ingredient you can compute it as:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html">dailyDoseCoverage</a></span><span class="op">(</span>cdm <span class="op">=</span> <span class="va">cdm</span>, ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"result_id"</span>, <span class="st">"cdm_name"</span>, <span class="st">"group_name"</span>, <span class="st">"group_level"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 × 9
   strata_name                strata_level variable_name variable_level estimate_name estimate_type estimate_value additional_name
   &lt;chr&gt;                      &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;          
 1 overall                    overall      number recor… &lt;NA&gt;           count         integer       14205          overall        
 2 overall                    overall      daily_dose    &lt;NA&gt;           count_missing integer       697            overall        
 3 overall                    overall      daily_dose    &lt;NA&gt;           percentage_m… percentage    4.90672298486… overall        
 4 overall                    overall      daily_dose    &lt;NA&gt;           mean          numeric       234.787349787… overall        
 5 overall                    overall      daily_dose    &lt;NA&gt;           sd            numeric       104.686522784… overall        
 6 overall                    overall      daily_dose    &lt;NA&gt;           min           numeric       18.9875        overall        
 7 overall                    overall      daily_dose    &lt;NA&gt;           q05           numeric       18.9875        overall        
 8 overall                    overall      daily_dose    &lt;NA&gt;           q25           numeric       152.727272727… overall        
 9 overall                    overall      daily_dose    &lt;NA&gt;           median        numeric       284.375        overall        
10 overall                    overall      daily_dose    &lt;NA&gt;           q75           numeric       303.333333333… overall        
11 overall                    overall      daily_dose    &lt;NA&gt;           q95           numeric       315.972222222… overall        
12 overall                    overall      daily_dose    &lt;NA&gt;           max           numeric       375            overall        
13 unit                       milligram    number recor… &lt;NA&gt;           count         integer       14205          overall        
14 unit                       milligram    daily_dose    &lt;NA&gt;           count_missing integer       697            overall        
15 unit                       milligram    daily_dose    &lt;NA&gt;           percentage_m… percentage    4.90672298486… overall        
16 unit                       milligram    daily_dose    &lt;NA&gt;           mean          numeric       234.787349787… overall        
17 unit                       milligram    daily_dose    &lt;NA&gt;           sd            numeric       104.686522784… overall        
18 unit                       milligram    daily_dose    &lt;NA&gt;           min           numeric       18.9875        overall        
19 unit                       milligram    daily_dose    &lt;NA&gt;           q05           numeric       18.9875        overall        
20 unit                       milligram    daily_dose    &lt;NA&gt;           q25           numeric       152.727272727… overall        
21 unit                       milligram    daily_dose    &lt;NA&gt;           median        numeric       284.375        overall        
22 unit                       milligram    daily_dose    &lt;NA&gt;           q75           numeric       303.333333333… overall        
23 unit                       milligram    daily_dose    &lt;NA&gt;           q95           numeric       315.972222222… overall        
24 unit                       milligram    daily_dose    &lt;NA&gt;           max           numeric       375            overall        
25 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… number recor… &lt;NA&gt;           count         integer       14205          overall        
26 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           count_missing integer       697            overall        
27 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           percentage_m… percentage    4.90672298486… overall        
28 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           mean          numeric       234.787349787… overall        
29 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           sd            numeric       104.686522784… overall        
30 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           min           numeric       18.9875        overall        
31 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           q05           numeric       18.9875        overall        
32 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           q25           numeric       152.727272727… overall        
33 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           median        numeric       284.375        overall        
34 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           q75           numeric       303.333333333… overall        
35 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           q95           numeric       315.972222222… overall        
36 route &amp;&amp;&amp; unit             NA &amp;&amp;&amp; mill… daily_dose    &lt;NA&gt;           max           numeric       375            overall        
37 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… number recor… &lt;NA&gt;           count         integer       1993           overall        
38 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… number recor… &lt;NA&gt;           count         integer       12212          overall        
39 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           count_missing integer       2              overall        
40 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           count_missing integer       695            overall        
41 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           percentage_m… percentage    0.10035122930… overall        
42 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           percentage_m… percentage    5.69112348509… overall        
43 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           mean          numeric       19.6295316423… overall        
44 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           mean          numeric       271.982731911… overall        
45 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           sd            numeric       0.63291464828… overall        
46 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           sd            numeric       58.8791704932… overall        
47 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           min           numeric       18.9875        overall        
48 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           min           numeric       148.571428571… overall        
49 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q05           numeric       18.9875        overall        
50 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q05           numeric       149.333333333… overall        
51 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q25           numeric       18.9875        overall        
52 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q25           numeric       284.375        overall        
53 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           median        numeric       20.2533333333… overall        
54 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           median        numeric       303.333333333… overall        
55 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q75           numeric       20.2533333333… overall        
56 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q75           numeric       303.333333333… overall        
57 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q95           numeric       20.2533333333… overall        
58 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           q95           numeric       316.447368421… overall        
59 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           max           numeric       20.2533333333… overall        
60 unit &amp;&amp;&amp; route &amp;&amp;&amp; patter… milligram &amp;… daily_dose    &lt;NA&gt;           max           numeric       375            overall        
# ℹ 1 more variable: additional_level &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</section></section><section><section id="characterisation" class="title-slide slide level1 center"><h1>Characterisation</h1>

</section><section id="characterise-drug-use" class="slide level2"><h2>Characterise drug use</h2>
<p>We have a function to add columns related to drugUse:</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_010_1718472667&gt; [?? x 6]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date number_exposures number_eras
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                     &lt;dbl&gt;       &lt;dbl&gt;
 1                    1          3 2010-08-27        2010-10-26                     1           1
 2                    1         38 2000-01-01        2000-01-07                     1           1
 3                    1         82 2004-04-05        2004-04-19                     1           1
 4                    1         94 2015-11-30        2015-12-14                     1           1
 5                    1        152 2000-10-23        2000-11-22                     1           1
 6                    1        304 2003-09-03        2003-09-10                     1           1
 7                    1        311 2008-01-04        2008-01-18                     1           1
 8                    1        339 2008-12-13        2008-12-27                     1           1
 9                    1        370 2002-10-12        2002-11-02                     1           1
10                    1        488 2002-04-01        2002-04-15                     1           1
# ℹ more rows</code></pre>
</div>
</div>
<p><code>number_exposure</code> and <code>number_eras</code> are always computed.</p>
</section><section id="characterise-drug-use-1" class="slide level2"><h2>Characterise drug use</h2>
<p><code>duartion = TRUE</code> adds duration and impute_duration_percentage fields</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"number_exposures"</span>, <span class="st">"number_eras"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 6]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date duration impute_duration_percentage
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;             &lt;dbl&gt;                      &lt;dbl&gt;
 1                    1          3 2010-08-27        2010-10-26            61                          0
 2                    1         38 2000-01-01        2000-01-07             7                          0
 3                    1         82 2004-04-05        2004-04-19            15                          0
 4                    1         94 2015-11-30        2015-12-14            15                          0
 5                    1        152 2000-10-23        2000-11-22            31                          0
 6                    1        304 2003-09-03        2003-09-10             8                          0
 7                    1        311 2008-01-04        2008-01-18            15                          0
 8                    1        339 2008-12-13        2008-12-27            15                          0
 9                    1        370 2002-10-12        2002-11-02            22                          0
10                    1        488 2002-04-01        2002-04-15            15                          0
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="characterise-drug-use-2" class="slide level2"><h2>Characterise drug use</h2>
<p><code>quantity = TRUE</code> adds initial_quantity and cumulative_quantity fields</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"number_exposures"</span>, <span class="st">"number_eras"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 6]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date cumulative_quantity initial_quantity
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                        &lt;dbl&gt;            &lt;dbl&gt;
 1                    1          3 2010-08-27        2010-10-26                       60               60
 2                    1         38 2000-01-01        2000-01-07                       14               14
 3                    1         82 2004-04-05        2004-04-19                       14               14
 4                    1         94 2015-11-30        2015-12-14                       14               14
 5                    1        152 2000-10-23        2000-11-22                       30               30
 6                    1        304 2003-09-03        2003-09-10                        7                7
 7                    1        311 2008-01-04        2008-01-18                       14               14
 8                    1        339 2008-12-13        2008-12-27                       14               14
 9                    1        370 2002-10-12        2002-11-02                       21               21
10                    1        488 2002-04-01        2002-04-15                       14               14
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="characterise-drug-use-3" class="slide level2"><h2>Characterise drug use</h2>
<p><code>dose = TRUE</code> adds impute_daily_dose_percentage, initial_daily_dose and cumulative_dose fields</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"number_exposures"</span>, <span class="st">"number_eras"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 7]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date impute_daily_dose_percentage initial_daily_dose_milligram
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                                 &lt;dbl&gt;                        &lt;dbl&gt;
 1                    1          3 2010-08-27        2010-10-26                                 0                        320. 
 2                    1         38 2000-01-01        2000-01-07                                 0                        303. 
 3                    1         82 2004-04-05        2004-04-19                                 0                        303. 
 4                    1         94 2015-11-30        2015-12-14                                 0                        303. 
 5                    1        152 2000-10-23        2000-11-22                                 0                        315. 
 6                    1        304 2003-09-03        2003-09-10                                 0                         19.0
 7                    1        311 2008-01-04        2008-01-18                                 0                        303. 
 8                    1        339 2008-12-13        2008-12-27                                 0                        303. 
 9                    1        370 2002-10-12        2002-11-02                                 0                        310. 
10                    1        488 2002-04-01        2002-04-15                                 0                         20.3
# ℹ more rows
# ℹ 1 more variable: cumulative_dose_milligram &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</section><section id="characterise-drug-use-4" class="slide level2"><h2>Characterise drug use</h2>
<p>We can make some decisions to solve how we threat gaps (not exposed periods):</p>

<img data-src="eraJoinMode.png" class="r-stretch"></section><section id="characterise-drug-use-5" class="slide level2"><h2>Characterise drug use</h2>

<img data-src="overlpaMode.png" class="r-stretch"></section><section id="characterise-drug-use-6" class="slide level2"><h2>Characterise drug use</h2>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    eraJoinMode <span class="op">=</span> <span class="st">"zero"</span>,</span>
<span>    sameIndexMode <span class="op">=</span> <span class="st">"sum"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_024_1718472694&gt; [?? x 13]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date duration number_exposures cumulative_quantity
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;             &lt;dbl&gt;            &lt;dbl&gt;               &lt;dbl&gt;
 1                    1          3 2010-08-27        2010-10-26            61                1                  60
 2                    1         38 2000-01-01        2000-01-07             7                1                  14
 3                    1         82 2004-04-05        2004-04-19            15                1                  14
 4                    1         94 2015-11-30        2015-12-14            15                1                  14
 5                    1        152 2000-10-23        2000-11-22            31                1                  30
 6                    1        304 2003-09-03        2003-09-10             8                1                   7
 7                    1        311 2008-01-04        2008-01-18            15                1                  14
 8                    1        339 2008-12-13        2008-12-27            15                1                  14
 9                    1        370 2002-10-12        2002-11-02            22                1                  21
10                    1        488 2002-04-01        2002-04-15            15                1                  14
# ℹ more rows
# ℹ 6 more variables: initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;, number_eras &lt;dbl&gt;,
#   impute_daily_dose_percentage &lt;dbl&gt;, initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</code></pre>
</div>
</div>
</section><section id="characterise-drug-use-7" class="slide level2"><h2>Characterise drug use</h2>
<p>We can summarise all this information grouped by cohorts in a summarisedResult object:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span>ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html">summariseDrugUse</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"strata_name"</span>, <span class="op">-</span><span class="st">"strata_level"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 101 × 11
    result_id cdm_name              group_name group_level variable_name variable_level estimate_name estimate_type estimate_value
        &lt;int&gt; &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;         
  1         1 Synthea synthetic he… cohort_na… acetaminop… number recor… &lt;NA&gt;           count         integer       1979          
  2         1 Synthea synthetic he… cohort_na… acetaminop… number subje… &lt;NA&gt;           count         integer       1979          
  3         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           min           numeric       1             
  4         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           q05           numeric       1.90000000000…
  5         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           q25           numeric       8             
  6         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           median        numeric       15            
  7         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           q75           numeric       15            
  8         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           q95           numeric       38            
  9         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           max           numeric       128           
 10         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           mean          numeric       16.4537645275…
 11         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           sd            numeric       15.5892764641…
 12         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           count_missing integer       0             
 13         1 Synthea synthetic he… cohort_na… acetaminop… duration      &lt;NA&gt;           percentage_m… percentage    0             
 14         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           min           numeric       1             
 15         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           q05           numeric       1             
 16         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           q25           numeric       1             
 17         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           median        numeric       1             
 18         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           q75           numeric       1             
 19         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           q95           numeric       1             
 20         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           max           numeric       3             
 21         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           mean          numeric       1.02475997978…
 22         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           sd            numeric       0.16180659945…
 23         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           count_missing integer       0             
 24         1 Synthea synthetic he… cohort_na… acetaminop… number_expos… &lt;NA&gt;           percentage_m… percentage    0             
 25         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           min           numeric       0             
 26         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           q05           numeric       7             
 27         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           q25           numeric       7             
 28         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           median        numeric       14            
 29         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           q75           numeric       14            
 30         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           q95           numeric       35.1999999999…
 31         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           max           numeric       100           
 32         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           mean          numeric       15.5219807983…
 33         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           sd            numeric       15.4241972689…
 34         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           count_missing integer       0             
 35         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_q… &lt;NA&gt;           percentage_m… percentage    0             
 36         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           min           numeric       0             
 37         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           q05           numeric       7             
 38         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           q25           numeric       7             
 39         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           median        numeric       14            
 40         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           q75           numeric       14            
 41         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           q95           numeric       35            
 42         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           max           numeric       100           
 43         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           mean          numeric       15.3956543708…
 44         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           sd            numeric       15.2265534027…
 45         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           count_missing integer       0             
 46         1 Synthea synthetic he… cohort_na… acetaminop… initial_quan… &lt;NA&gt;           percentage_m… percentage    0             
 47         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           min           numeric       0             
 48         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           q05           numeric       0             
 49         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           q25           numeric       0             
 50         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           median        numeric       0             
 51         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           q75           numeric       0             
 52         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           q95           numeric       0             
 53         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           max           numeric       0             
 54         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           mean          numeric       0             
 55         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           sd            numeric       0             
 56         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           count_missing integer       0             
 57         1 Synthea synthetic he… cohort_na… acetaminop… impute_durat… &lt;NA&gt;           percentage_m… percentage    0             
 58         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           min           numeric       1             
 59         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           q05           numeric       1             
 60         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           q25           numeric       1             
 61         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           median        numeric       1             
 62         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           q75           numeric       1             
 63         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           q95           numeric       1             
 64         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           max           numeric       2             
 65         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           mean          numeric       1.00404244567…
 66         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           sd            numeric       0.06346762761…
 67         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           count_missing integer       0             
 68         1 Synthea synthetic he… cohort_na… acetaminop… number_eras   &lt;NA&gt;           percentage_m… percentage    0             
 69         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           min           numeric       0             
 70         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           q05           numeric       0             
 71         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           q25           numeric       0             
 72         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           median        numeric       0             
 73         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           q75           numeric       0             
 74         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           q95           numeric       50            
 75         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           max           numeric       100           
 76         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           mean          numeric       5.59204985683…
 77         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           sd            numeric       21.8615099438…
 78         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           count_missing integer       0             
 79         1 Synthea synthetic he… cohort_na… acetaminop… impute_daily… &lt;NA&gt;           percentage_m… percentage    0             
 80         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           min           numeric       18.9875       
 81         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           q05           numeric       18.9875       
 82         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           q25           numeric       284.375       
 83         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           median        numeric       303.333333333…
 84         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           q75           numeric       303.333333333…
 85         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           q95           numeric       316.281067251…
 86         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           max           numeric       321.782178217…
 87         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           mean          numeric       248.791088712…
 88         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           sd            numeric       108.199579381…
 89         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           count_missing integer       91            
 90         1 Synthea synthetic he… cohort_na… acetaminop… initial_dail… &lt;NA&gt;           percentage_m… percentage    4.59828196058…
 91         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           min           numeric       Inf           
 92         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           q05           numeric       &lt;NA&gt;          
 93         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           q25           numeric       &lt;NA&gt;          
 94         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           median        numeric       &lt;NA&gt;          
 95         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           q75           numeric       &lt;NA&gt;          
 96         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           q95           numeric       &lt;NA&gt;          
 97         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           max           numeric       -Inf          
 98         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           mean          numeric       NaN           
 99         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           sd            numeric       &lt;NA&gt;          
100         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           count_missing integer       1979          
101         1 Synthea synthetic he… cohort_na… acetaminop… cumulative_d… &lt;NA&gt;           percentage_m… percentage    100           
# ℹ 2 more variables: additional_name &lt;chr&gt;, additional_level &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</section><section id="indication" class="slide level2"><h2>Indication</h2>
<p>First we need to instantiate some indication cohorts, in this case we are going to explore <code>sinusitis</code> and <code>bronchitis</code>:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html">generateConceptCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>sinusitis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4294548</span>, <span class="fl">40481087</span>, <span class="fl">257012</span><span class="op">)</span>, bronchitis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">258780</span>, <span class="fl">260139</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"indications"</span>,</span>
<span>  limit <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  end <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/settings.html">settings</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">indications</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"cohort_definition_id"</span>, <span class="st">"cohort_name"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">indications</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"cohort_definition_id"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  cohort_definition_id cohort_name number_records number_subjects
                 &lt;int&gt; &lt;chr&gt;                &lt;int&gt;           &lt;int&gt;
1                    1 sinusitis            19032            2688
2                    2 bronchitis            8232            2546</code></pre>
</div>
</div>
</div>
</section><section id="indication-1" class="slide level2"><h2>Indication</h2>
<p>We have to define a gap (period before index date) that we are interested to assess indication:</p>

<img data-src="gapIndication.png" class="r-stretch"></section><section id="indication-2" class="slide level2"><h2>Indication</h2>
<div class="cell">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html">addIndication</a></span><span class="op">(</span></span>
<span>    indicationCohortName <span class="op">=</span> <span class="st">"indications"</span>,</span>
<span>    unknownIndicationTable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"condition_occurrence"</span><span class="op">)</span>,</span>
<span>    indicationGap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 16
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
$ cohort_definition_id          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ subject_id                    &lt;int&gt; 3, 38, 82, 94, 105, 152, 185, 311, 370, 461, 488, 499, 665, 722, 761, 931, 974, 994, 1058,…
$ cohort_start_date             &lt;date&gt; 2010-08-27, 2000-01-01, 2004-04-05, 2015-11-30, 2005-11-11, 2000-10-23, 2015-02-21, 2008-…
$ cohort_end_date               &lt;date&gt; 2010-10-26, 2000-01-07, 2004-04-19, 2015-12-14, 2005-11-11, 2000-11-22, 2015-03-28, 2008-…
$ indication_gap_0_bronchitis   &lt;dbl&gt; 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, …
$ indication_gap_0_sinusitis    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ indication_gap_0_none         &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ indication_gap_0_unknown      &lt;dbl&gt; 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, …
$ indication_gap_30_sinusitis   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ indication_gap_30_bronchitis  &lt;dbl&gt; 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, …
$ indication_gap_30_none        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ indication_gap_30_unknown     &lt;dbl&gt; 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, …
$ indication_gap_inf_bronchitis &lt;dbl&gt; 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ indication_gap_inf_sinusitis  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ indication_gap_inf_none       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ indication_gap_inf_unknown    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</code></pre>
</div>
</div>
</section><section id="indication-3" class="slide level2"><h2>Indication</h2>
<p>We can join the indications if we need later to stratify by them:</p>
<div class="cell">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/indicationToStrata.html">indicationToStrata</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 7]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/C:\Users\martics\AppData\Local\Temp\RtmpszDm0P\file4f5477b940da.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date indication_gap_0 indication_gap_30        indication_gap_inf 
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;              
 1                    1          3 2010-08-27        2010-10-26      Unknown          Unknown                  Bronchitis and Sin…
 2                    1         38 2000-01-01        2000-01-07      None             Bronchitis               Bronchitis and Sin…
 3                    1         82 2004-04-05        2004-04-19      Bronchitis       Bronchitis               Bronchitis and Sin…
 4                    1         94 2015-11-30        2015-12-14      Bronchitis       Bronchitis               Bronchitis and Sin…
 5                    1        105 2005-11-11        2005-11-11      Unknown          Unknown                  Sinusitis          
 6                    1        152 2000-10-23        2000-11-22      Unknown          Unknown                  Bronchitis and Sin…
 7                    1        185 2015-02-21        2015-03-28      Unknown          Unknown                  Bronchitis and Sin…
 8                    1        311 2008-01-04        2008-01-18      Bronchitis       Sinusitis and Bronchitis Bronchitis and Sin…
 9                    1        370 2002-10-12        2002-11-02      Unknown          Unknown                  Sinusitis          
10                    1        461 2011-03-11        2011-03-18      Bronchitis       Bronchitis               Bronchitis and Sin…
# ℹ more rows</code></pre>
</div>
</div>
</section><section id="indication-4" class="slide level2"><h2>Indication</h2>
<p>Summarise indication into a summarisedResult object:</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html">summariseIndication</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"variable_name"</span>, <span class="st">"variable_level"</span>, <span class="st">"estimate_name"</span>, <span class="st">"estimate_value"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26 × 4
   variable_name                   variable_level estimate_name estimate_value  
   &lt;chr&gt;                           &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;           
 1 number records                  &lt;NA&gt;           count         1979            
 2 number subjects                 &lt;NA&gt;           count         1979            
 3 Indication on index date        Bronchitis     count         1373            
 4 Indication on index date        Bronchitis     percentage    69.3784739767559
 5 Indication on index date        Sinusitis      count         &lt;NA&gt;            
 6 Indication on index date        Sinusitis      percentage    &lt;NA&gt;            
 7 Indication on index date        None           count         48              
 8 Indication on index date        None           percentage    2.42546740778171
 9 Indication on index date        Unknown        count         558             
10 Indication on index date        Unknown        percentage    28.1960586154624
11 Indication during prior 30 days Sinusitis      count         24              
12 Indication during prior 30 days Sinusitis      percentage    1.21273370389085
13 Indication during prior 30 days Bronchitis     count         1395            
14 Indication during prior 30 days Bronchitis     percentage    70.4901465386559
15 Indication during prior 30 days None           count         &lt;NA&gt;            
16 Indication during prior 30 days None           percentage    &lt;NA&gt;            
17 Indication during prior 30 days Unknown        count         580             
18 Indication during prior 30 days Unknown        percentage    29.3077311773623
19 Indication any time prior       Bronchitis     count         1902            
20 Indication any time prior       Bronchitis     percentage    96.1091460333502
21 Indication any time prior       Sinusitis      count         1958            
22 Indication any time prior       Sinusitis      percentage    98.9388580090955
23 Indication any time prior       None           count         0               
24 Indication any time prior       None           percentage    0               
25 Indication any time prior       Unknown        count         &lt;NA&gt;            
26 Indication any time prior       Unknown        percentage    &lt;NA&gt;            </code></pre>
</div>
</div>
</section><section id="alternative-treatments" class="slide level2"><h2>Alternative treatments</h2>
<p>You can summarise other treatments after a certain cohort, for example we have our cohort of <code>acetaminophen</code>, which are the treatments that are used.</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html">getDrugIngredientCodes</a></span><span class="op">(</span>cdm <span class="op">=</span> <span class="va">cdm</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
- ondansetron (2 codes)
- meperidine (2 codes)
- loratadine (3 codes)
- morphine (2 codes)
- aspirin (2 codes)
- naproxen (3 codes)
- celecoxib (1 codes)
- dextromethorphan (2 codes)
- diclofenac (1 codes)
- oxycodone (2 codes)
along with 81 more codelists</code></pre>
</div>
</div>
</div>
</section><section id="alternative-treatments-1" class="slide level2"><h2>Alternative treatments</h2>
<div class="cell">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">dus_new_user</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromConceptSet.html">summariseTreatmentFromConceptSet</a></span><span class="op">(</span></span>
<span>    treatmentConceptSet <span class="op">=</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html">getDrugIngredientCodes</a></span><span class="op">(</span>cdm <span class="op">=</span> <span class="va">cdm</span><span class="op">)</span>, </span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">90</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">91</span>, <span class="fl">180</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">181</span>, <span class="fl">270</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">271</span>, <span class="fl">360</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"variable_name"</span>, <span class="st">"estimate_name"</span>, <span class="st">"estimate_value"</span>, <span class="st">"additional_name"</span>, <span class="st">"additional_level"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 736 × 5
   variable_name estimate_name estimate_value     additional_name additional_level
   &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;              &lt;chr&gt;           &lt;chr&gt;           
 1 acetaminophen count         1979               window          0 to 90         
 2 acetaminophen percentage    100                window          0 to 90         
 3 albuterol     count         2                  window          0 to 90         
 4 albuterol     percentage    0.101061141990904  window          0 to 90         
 5 alendronate   count         1                  window          0 to 90         
 6 alendronate   percentage    0.0505305709954522 window          0 to 90         
 7 alfentanil    count         1                  window          0 to 90         
 8 alfentanil    percentage    0.0505305709954522 window          0 to 90         
 9 alteplase     count         0                  window          0 to 90         
10 alteplase     percentage    0                  window          0 to 90         
# ℹ 726 more rows</code></pre>
</div>
</div>
</section><section id="alternative-treatments-2" class="slide level2"><h2>Alternative treatments</h2>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">xx</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">estimate_name</span> <span class="op">==</span> <span class="st">"percentage"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>estimate_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">estimate_value</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">variable_name</span>, window <span class="op">=</span> <span class="va">additional_level</span>, <span class="va">estimate_value</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">window</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"0 to 90"</span>, <span class="st">"91 to 180"</span>, <span class="st">"181 to 270"</span>, <span class="st">"271 to 360"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xx</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">variable_name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">xx</span><span class="op">$</span><span class="va">variable_name</span><span class="op">[</span><span class="va">xx</span><span class="op">$</span><span class="va">estimate_value</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">variable_name</span>, y <span class="op">=</span> <span class="va">estimate_value</span>, color <span class="op">=</span> <span class="va">variable_name</span>, fill <span class="op">=</span> <span class="va">variable_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">window</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="alternative-treatments-3" class="slide level2"><h2>Alternative treatments</h2>

<img data-src="DrugUtilisation_files/figure-revealjs/unnamed-chunk-39-1.png" width="960" class="r-stretch"></section><section id="treatment-discontinuation" class="slide level2"><h2>Treatment discontinuation</h2>
<p>We are working on a treatment discontinuation where we use the CohortSurvival package that we will see later.</p>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="DrugUtilisation_files/figure-revealjs/unnamed-chunk-40-1.png" width="960"></p>
</div>
</div>
</div>
</section><section id="new-slide" class="slide level2"><h2>New slide</h2>
<p><img data-src="images/hexticker.png" class="absolute" style="top: 0px; right: 70px; height: 70px; "><img data-src="images/logoHDS.png" class="absolute" style="top: 0px; right: 0px; height: 70px; "></p>
</section></section><section id="section" class="title-slide slide level1 end-slide center"><h1></h1>
<div style="margin-bottom: 25px;">

</div>
<div style="margin-bottom: 25px;">

</div>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="images/hexticker.png" style="right: 50%; top: 50%; height: 500; fig-align: center"></p>
</div><div class="column" style="width:65%;">
<div style="margin-top: 135px;">

</div>
<p><span style="font-size: 100px;"><strong>DrugUtilisation</strong></span></p>
<div style="margin-bottom: 25px;">

</div>
<p><span style="font-size: 60px; text-align: left; color: grey"><strong>Thank you for your attention!</strong></span></p>
<div style="margin-bottom: 25px;">

</div>
<div class="columns">
<div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://cran.r-project.org/package=DrugUtilisation" style="color: #3a6ea5; text-decoration: underline;"><strong>CRAN</strong></a></p>
</div><div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://cran.r-project.org/web/packages/DrugUtilisation/DrugUtilisation.pdf" style="color: #3a6ea5; text-decoration: underline; text-align:center"><strong>Manual</strong></a></p>
</div><div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://github.com/darwin-eu-dev/DrugUtilisation" style="color: #3a6ea5; text-decoration: underline; text-align:center"><strong>GitHub</strong></a></p>
</div><div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://ohdsi.github.io/DrugUtilisation/" style="color: #3a6ea5; text-decoration: underline; text-align:center"><strong>Website</strong></a></p>
</div><div class="column" style="width:1.2%;">

</div>
</div>
</div>
</div>
<div class="footer footer-default">
<p>Oxford Summer School 2024</p>
</div>
</section>
</div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="DrugUtilisation_files/libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="DrugUtilisation_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/quarto-support/support.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/notes/notes.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/search/search.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/zoom/zoom.js"></script><script src="DrugUtilisation_files/libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 7.0e-2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>


</body></html>