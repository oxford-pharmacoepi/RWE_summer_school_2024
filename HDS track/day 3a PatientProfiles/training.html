<!DOCTYPE html>
<html lang="en"><head>
<script src="training_files/libs/clipboard/clipboard.min.js"></script>
<script src="training_files/libs/quarto-html/tabby.min.js"></script>
<script src="training_files/libs/quarto-html/popper.min.js"></script>
<script src="training_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="training_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="training_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="training_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="author" content="A package for adding patient level characteristics to OMOP CDM tables.">
<title>PatientProfiles</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="training_files/libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="training_files/libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
<link rel="stylesheet" href="training_files/libs/revealjs/dist/theme/quarto.css" id="theme">
<link href="training_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="training_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="training_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="training_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
<link href="training_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
<link href="training_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center"><h1 class="title">PatientProfiles</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
A package for adding patient level characteristics to OMOP CDM tables. 
</div>
</div>
</div>

</section><section id="patientprofiles" class="slide level2"><h2>PatientProfiles</h2>

<img data-src="https://github.com/darwin-eu-dev/PatientProfiles/blob/main/man/figures/logo.png?raw=true" class="r-stretch quarto-figure-center"><div class="cell">

</div>
</section><section id="lets-get-started" class="slide level2"><h2>Let’s get started</h2>
<p><a href="https://posit.cloud/spaces/511957/join?access_code=dD2iGaxdb1_cmAIZkrfrSc3AZGGMRXAbYaK921lv">Posit cloud</a></p>
</section><section id="lets-get-started-1" class="slide level2"><h2>Let’s get started</h2>
<div class="fragment">
<p>The following packages are needed:</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"CDMConnector"</span>, <span class="st">"duckdb"</span>, <span class="st">"PatientProfiles"</span>, <span class="st">"here"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>To conduct this tutorial we need to have eunomia data set.</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/">CDMConnector</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r.duckdb.org/">duckdb</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/PatientProfiles/">PatientProfiles</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span><span class="st">"EUNOMIA_DATA_FOLDER"</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/downloadEunomiaData.html">downloadEunomiaData</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="lets-get-started-2" class="slide level2"><h2>Let’s get started</h2>
<div class="fragment">
<p>Create our cdm object:</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span><span class="op">(</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html">duckdb</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/eunomiaDir.html">eunomia_dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">con</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>&lt;duckdb_connection 68a70 driver=&lt;duckdb_driver 47630 dbdir='C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb' read_only=FALSE bigint=numeric&gt;&gt;</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/cdm_from_con.html">cdmFromCon</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">con</span>, cdmSchema <span class="op">=</span> <span class="st">"main"</span>, writeSchema <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span>
<span><span class="va">cdm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── # OMOP CDM reference (duckdb) of Synthea synthetic health database ────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,
procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location,
care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary,
domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map,
drug_strength</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• cohort tables: -</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• achilles tables: -</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• other tables: -</code></pre>
</div>
</div>
</div>
</section><section id="create-our-first-cohort" class="slide level2"><h2>Create our first cohort</h2>
<p>We are going to create a cohort of sinusitis:</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html">generateConceptCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"sinusitis"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"bacterial_sinusitis"</span> <span class="op">=</span> <span class="fl">4294548</span>, </span>
<span>    <span class="st">"viral_sinusitis"</span> <span class="op">=</span> <span class="fl">40481087</span>, </span>
<span>    <span class="st">"chronic_sinusitis"</span> <span class="op">=</span> <span class="fl">257012</span>, </span>
<span>    <span class="st">"any_sinusitis"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4294548</span>, <span class="fl">40481087</span>, <span class="fl">257012</span><span class="op">)</span></span>
<span>  <span class="op">)</span>, </span>
<span>  limit <span class="op">=</span> <span class="st">"all"</span>, </span>
<span>  end <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── # OMOP CDM reference (duckdb) of Synthea synthetic health database ────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,
procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location,
care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary,
domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map,
drug_strength</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• cohort tables: sinusitis</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• achilles tables: -</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• other tables: -</code></pre>
</div>
</div>
</div>
</section><section id="create-our-first-cohort-1" class="slide level2"><h2>Create our first cohort</h2>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;main.sinusitis&gt; [?? x 4]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         
 1                    1        155 2016-01-23        2016-01-23     
 2                    1        280 1995-11-27        1995-11-27     
 3                    1        393 1961-11-20        1961-11-20     
 4                    1       2156 1994-04-03        1994-04-03     
 5                    1       2392 1932-08-18        1932-08-18     
 6                    1       3761 1980-08-27        1980-08-27     
 7                    1       4764 2005-06-11        2005-06-11     
 8                    2         81 1995-03-01        1995-03-01     
 9                    2         97 1952-12-28        1952-12-28     
10                    2        163 2005-12-17        2005-12-17     
# ℹ more rows</code></pre>
</div>
</div>
</section><section id="create-our-first-cohort-2" class="slide level2"><h2>Create our first cohort</h2>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/settings.html">settings</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  cohort_definition_id cohort_name         limit prior_observation future_observation   end
                 &lt;int&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;dbl&gt;              &lt;dbl&gt; &lt;dbl&gt;
1                    1 bacterial_sinusitis all                   0                  0     0
2                    2 viral_sinusitis     all                   0                  0     0
3                    3 chronic_sinusitis   all                   0                  0     0
4                    4 any_sinusitis       all                   0                  0     0</code></pre>
</div>
</div>
</section><section id="create-our-first-cohort-3" class="slide level2"><h2>Create our first cohort</h2>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  cohort_definition_id number_records number_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;
1                    1            939             786
2                    2          17268            2686
3                    3            825             812
4                    4          19032            2688</code></pre>
</div>
</div>
</section><section id="create-our-first-cohort-4" class="slide level2"><h2>Create our first cohort</h2>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 7
  cohort_definition_id number_records number_subjects reason_id reason                    excluded_records excluded_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;             &lt;int&gt;
1                    1            939             786         1 Initial qualifying events                0                 0
2                    2          17268            2686         1 Initial qualifying events                0                 0
3                    3            825             812         1 Initial qualifying events                0                 0
4                    4          19032            2688         1 Initial qualifying events                0                 0</code></pre>
</div>
</div>
</section><section id="introduction" class="slide level2"><h2>Introduction</h2>
<ul>
<li class="fragment"><p>To add characteristics to tables (sex, age, prior observation, future observation, birth date, …)</p></li>
<li class="fragment"><p>To identify intersections with cohorts, concepts and omop tables.</p></li>
<li class="fragment"><p>To summarise tables and put it in to summarseResults format.</p></li>
</ul></section><section id="addage" class="slide level2"><h2>addAge()</h2>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_002_1718807104&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date   age
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;int&gt;
 1                    1        280 1995-11-27        1995-11-27         57
 2                    1        393 1961-11-20        1961-11-20          4
 3                    1       2156 1994-04-03        1994-04-03         29
 4                    1       2392 1932-08-18        1932-08-18         16
 5                    1       3761 1980-08-27        1980-08-27         24
 6                    1       4764 2005-06-11        2005-06-11         36
 7                    2         97 1952-12-28        1952-12-28          9
 8                    2        163 2005-12-17        2005-12-17         39
 9                    2        183 1998-11-01        1998-11-01         24
10                    2        338 1974-09-29        1974-09-29          7
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addage-1" class="slide level2"><h2>addAge()</h2>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span></span>
<span>    indexDate <span class="op">=</span> <span class="st">"cohort_start_date"</span>, </span>
<span>    ageName <span class="op">=</span> <span class="st">"age"</span>, </span>
<span>    ageMissingMonth <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    ageMissingDay <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    ageImposeMonth <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>    ageImposeDay <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>    missingAgeGroupValue <span class="op">=</span> <span class="st">"None"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="addage-2" class="slide level2"><h2>addAge()</h2>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">condition_occurrence</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span>indexDate <span class="op">=</span> <span class="st">"condition_end_date"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 17
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
$ condition_occurrence_id       &lt;int&gt; 4483, 4815, 5153, 5313, 5513, 5655, 6143, 6309, 6641, 6815, 6973, 7139, 7305, 7471, 7803, …
$ person_id                     &lt;int&gt; 263, 283, 304, 312, 326, 334, 362, 370, 392, 403, 410, 419, 430, 439, 455, 469, 492, 505, …
$ condition_concept_id          &lt;int&gt; 4112343, 28060, 257012, 4134304, 28060, 40481087, 4113008, 372328, 260139, 40481087, 40481…
$ condition_start_date          &lt;date&gt; 2015-10-02, 1984-02-15, 1974-07-30, 1991-05-14, 1979-09-23, 1999-07-12, 1998-07-03, 1970-…
$ condition_start_datetime      &lt;dttm&gt; 2015-10-02, 1984-02-15, 1974-07-30, 1991-05-14, 1979-09-23, 1999-07-12, 1998-07-03, 1970-…
$ condition_end_date            &lt;date&gt; 2015-10-14, 1984-02-25, 1974-11-05, 1991-06-13, 1979-10-06, 1999-07-19, 1998-07-17, 1970-…
$ condition_end_datetime        &lt;dttm&gt; 2015-10-14, 1984-02-25, 1974-11-05, 1991-06-13, 1979-10-06, 1999-07-19, 1998-07-17, 1970-…
$ condition_type_concept_id     &lt;int&gt; 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020,…
$ condition_status_concept_id   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ stop_reason                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ provider_id                   &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ visit_occurrence_id           &lt;int&gt; 17479, 18859, 20239, 20658, 21553, 22124, 24055, 24601, 25716, 26490, 27232, 27709, 28496,…
$ visit_detail_id               &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ condition_source_value        &lt;chr&gt; "195662009", "43878008", "40055000", "263102004", "43878008", "444814009", "284549007", "6…
$ condition_source_concept_id   &lt;int&gt; 4112343, 28060, 257012, 4134304, 28060, 40481087, 4113008, 372328, 260139, 40481087, 40481…
$ condition_status_source_value &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ age                           &lt;int&gt; 61, 3, 18, 19, 9, 64, 17, 6, 3, 13, 56, 13, 67, 12, 1, 68, 36, 43, 20, 23, 47, 41, 5, 30, …</code></pre>
</div>
</div>
</section><section id="add-also-age-groups" class="slide level2"><h2>add also age groups</h2>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span>ageGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">19</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_004_1718807105&gt; [?? x 6]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date   age age_group  
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;int&gt; &lt;chr&gt;      
 1                    1        280 1995-11-27        1995-11-27         57 20 or above
 2                    1        393 1961-11-20        1961-11-20          4 0 to 19    
 3                    1       2156 1994-04-03        1994-04-03         29 20 or above
 4                    1       2392 1932-08-18        1932-08-18         16 0 to 19    
 5                    1       3761 1980-08-27        1980-08-27         24 20 or above
 6                    1       4764 2005-06-11        2005-06-11         36 20 or above
 7                    2         97 1952-12-28        1952-12-28          9 0 to 19    
 8                    2        163 2005-12-17        2005-12-17         39 20 or above
 9                    2        183 1998-11-01        1998-11-01         24 20 or above
10                    2        338 1974-09-29        1974-09-29          7 0 to 19    
# ℹ more rows</code></pre>
</div>
</div>
</section><section id="add-also-age-groups-1" class="slide level2"><h2>add also age groups</h2>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span>ageGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"analysis"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"child"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">17</span><span class="op">)</span>, <span class="st">"adult"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="st">"age_group"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">19</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">39</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">59</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">79</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_005_1718807105&gt; [?? x 7]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date   age analysis age_group
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    
 1                    1        280 1995-11-27        1995-11-27         57 adult    40 to 59 
 2                    1        393 1961-11-20        1961-11-20          4 child    0 to 19  
 3                    1       2156 1994-04-03        1994-04-03         29 adult    20 to 39 
 4                    1       2392 1932-08-18        1932-08-18         16 child    0 to 19  
 5                    1       3761 1980-08-27        1980-08-27         24 adult    20 to 39 
 6                    1       4764 2005-06-11        2005-06-11         36 adult    20 to 39 
 7                    2         97 1952-12-28        1952-12-28          9 child    0 to 19  
 8                    2        163 2005-12-17        2005-12-17         39 adult    20 to 39 
 9                    2        183 1998-11-01        1998-11-01         24 adult    20 to 39 
10                    2        338 1974-09-29        1974-09-29          7 child    0 to 19  
# ℹ more rows</code></pre>
</div>
</div>
</section><section id="addsex" class="slide level2"><h2>addSex()</h2>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html">addSex</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_006_1718807106&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date sex   
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;chr&gt; 
 1                    1        155 2016-01-23        2016-01-23      Female
 2                    1        393 1961-11-20        1961-11-20      Female
 3                    1       2156 1994-04-03        1994-04-03      Female
 4                    1       2392 1932-08-18        1932-08-18      Female
 5                    1       3761 1980-08-27        1980-08-27      Female
 6                    1       4764 2005-06-11        2005-06-11      Male  
 7                    2         81 1995-03-01        1995-03-01      Male  
 8                    2         97 1952-12-28        1952-12-28      Female
 9                    2        163 2005-12-17        2005-12-17      Female
10                    2        183 1998-11-01        1998-11-01      Male  
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addsex-1" class="slide level2"><h2>addSex()</h2>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html">addSex</a></span><span class="op">(</span></span>
<span>    sexName <span class="op">=</span> <span class="st">"gender"</span>, </span>
<span>    missingSexValue <span class="op">=</span> <span class="st">"Missing"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_007_1718807106&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date gender
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;chr&gt; 
 1                    1        155 2016-01-23        2016-01-23      Female
 2                    1        393 1961-11-20        1961-11-20      Female
 3                    1       2156 1994-04-03        1994-04-03      Female
 4                    1       2392 1932-08-18        1932-08-18      Female
 5                    1       3761 1980-08-27        1980-08-27      Female
 6                    1       4764 2005-06-11        2005-06-11      Male  
 7                    2         81 1995-03-01        1995-03-01      Male  
 8                    2         97 1952-12-28        1952-12-28      Female
 9                    2        163 2005-12-17        2005-12-17      Female
10                    2        183 1998-11-01        1998-11-01      Male  
# ℹ more rows</code></pre>
</div>
</div>
</section><section id="addsex-2" class="slide level2"><h2>addSex()</h2>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">drug_exposure</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html">addSex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 24
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
$ drug_exposure_id             &lt;int&gt; 60926, 26418, 54785, 47027, 38712, 21897, 52764, 8667, 10459, 10524, 9646, 9653, 86272, 974…
$ person_id                    &lt;int&gt; 1332, 576, 4550, 3895, 3199, 476, 1154, 186, 871, 877, 806, 806, 1892, 817, 820, 1746, 2230…
$ drug_concept_id              &lt;int&gt; 40213198, 40213260, 1118084, 40162522, 19059056, 40213296, 40213160, 40213160, 1127078, 112…
$ drug_exposure_start_date     &lt;date&gt; 2010-10-06, 2017-10-25, 2000-11-13, 1982-03-30, 1975-08-19, 2008-05-31, 1971-05-16, 1976-0…
$ drug_exposure_start_datetime &lt;dttm&gt; 2010-10-06, 2017-10-25, 2000-11-13, 1982-03-30, 1975-08-19, 2008-05-31, 1971-05-16, 1976-0…
$ drug_exposure_end_date       &lt;date&gt; 2010-10-06, 2017-10-25, 2000-11-13, 1982-03-30, 1975-09-02, 2008-05-31, 1971-05-16, 1976-0…
$ drug_exposure_end_datetime   &lt;dttm&gt; 2010-10-06, 2017-10-25, 2000-11-13, 1982-03-30, 1975-09-02, 2008-05-31, 1971-05-16, 1976-0…
$ verbatim_end_date            &lt;date&gt; 2010-10-06, 2017-10-25, NA, NA, 1975-09-02, 2008-05-31, 1971-05-16, 1976-05-31, 1968-01-08…
$ drug_type_concept_id         &lt;int&gt; 581452, 581452, 38000177, 38000177, 38000177, 581452, 581452, 581452, 38000177, 38000177, 3…
$ stop_reason                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ refills                      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ quantity                     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ days_supply                  &lt;int&gt; 0, 0, 0, 0, 14, 0, 0, 0, 60, 14, 28, 7, 0, 14, 11, 7, 0, 0, 14, 0, 0, 91, 21, 0, 0, 360, 7,…
$ sig                          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ route_concept_id             &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ lot_number                   &lt;chr&gt; "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "…
$ provider_id                  &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ visit_occurrence_id          &lt;int&gt; 88400, 38145, 303185, 259023, 212733, 31764, 76224, 12657, 57955, 58440, 53468, 53505, 1260…
$ visit_detail_id              &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ drug_source_value            &lt;chr&gt; "133", "121", "00025152531", "857005", "243670", "52", "10", "10", "282464", "313782", "282…
$ drug_source_concept_id       &lt;int&gt; 40213198, 40213260, 44923712, 40162522, 19059056, 40213296, 40213160, 40213160, 1127078, 11…
$ route_source_value           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ dose_unit_source_value       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ sex                          &lt;chr&gt; "Male", "Male", "Male", "Female", "Male", "Male", "Female", "Female", "Female", "Female", "…</code></pre>
</div>
</div>
</section><section id="your-turn" class="slide level2"><h2>Your turn</h2>
<p>For each cohort in the sinusitis table, can you find out have many subject are age 18 or older and are male?</p>
</section><section id="solution" class="slide level2"><h2>Solution</h2>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html">addSex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">sex</span> <span class="op">==</span> <span class="st">"Male"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cohort_definition_id</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [4 x 2]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
  cohort_definition_id count
                 &lt;int&gt; &lt;dbl&gt;
1                    1   317
2                    2  5895
3                    3   258
4                    4  6470</code></pre>
</div>
</div>
</section><section id="addpriorobservation" class="slide level2"><h2>addPriorObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"></section><section id="addpriorobservation-1" class="slide level2"><h2>addPriorObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-24-1.png" width="960" class="r-stretch"></section><section id="addpriorobservation-2" class="slide level2"><h2>addPriorObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-25-1.png" width="960" class="r-stretch"></section><section id="addpriorobservation-3" class="slide level2"><h2>addPriorObservation()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addPriorObservation.html">addPriorObservation</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_011_1718807108&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date prior_observation
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                      &lt;int&gt;
 1                    1        280 1995-11-27        1995-11-27                  20849
 2                    1        393 1961-11-20        1961-11-20                   1776
 3                    1       2156 1994-04-03        1994-04-03                  10846
 4                    1       2392 1932-08-18        1932-08-18                   6040
 5                    1       3761 1980-08-27        1980-08-27                   8894
 6                    1       4764 2005-06-11        2005-06-11                  13443
 7                    2         97 1952-12-28        1952-12-28                   3450
 8                    2        163 2005-12-17        2005-12-17                  14417
 9                    2        183 1998-11-01        1998-11-01                   8774
10                    2        338 1974-09-29        1974-09-29                   2720
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addpriorobservation-4" class="slide level2"><h2>addPriorObservation()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">condition_occurrence</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addPriorObservation.html">addPriorObservation</a></span><span class="op">(</span></span>
<span>    indexDate <span class="op">=</span> <span class="st">"condition_start_date"</span>, </span>
<span>    priorObservationName <span class="op">=</span> <span class="st">"start_observation"</span>, <span class="co"># name of the column</span></span>
<span>    priorObservationType <span class="op">=</span> <span class="st">"date"</span> <span class="co"># default = "days"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 17
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
$ condition_occurrence_id       &lt;int&gt; 4483, 4657, 4815, 4981, 5153, 5313, 5655, 5811, 5977, 6143, 6309, 6500, 6815, 6973, 7139, …
$ person_id                     &lt;int&gt; 263, 273, 283, 293, 304, 312, 334, 341, 351, 362, 370, 384, 403, 410, 419, 430, 449, 469, …
$ condition_concept_id          &lt;int&gt; 4112343, 192671, 28060, 378001, 257012, 4134304, 40481087, 40481087, 40481087, 4113008, 37…
$ condition_start_date          &lt;date&gt; 2015-10-02, 2011-10-10, 1984-02-15, 2005-11-07, 1974-07-30, 1991-05-14, 1999-07-12, 1990-…
$ condition_start_datetime      &lt;dttm&gt; 2015-10-02, 2011-10-10, 1984-02-15, 2005-11-07, 1974-07-30, 1991-05-14, 1999-07-12, 1990-…
$ condition_end_date            &lt;date&gt; 2015-10-14, NA, 1984-02-25, 2005-12-07, 1974-11-05, 1991-06-13, 1999-07-19, 1990-10-05, 1…
$ condition_end_datetime        &lt;dttm&gt; 2015-10-14, NA, 1984-02-25, 2005-12-07, 1974-11-05, 1991-06-13, 1999-07-19, 1990-10-05, 1…
$ condition_type_concept_id     &lt;int&gt; 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020, 32020,…
$ condition_status_concept_id   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ stop_reason                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ provider_id                   &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ visit_occurrence_id           &lt;int&gt; 17479, 18192, 18859, 19515, 20239, 20658, 22124, 22784, 23405, 24055, 24601, 25351, 26490,…
$ visit_detail_id               &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ condition_source_value        &lt;chr&gt; "195662009", "K92.2", "43878008", "62106007", "40055000", "263102004", "444814009", "44481…
$ condition_source_concept_id   &lt;int&gt; 4112343, 35208414, 28060, 378001, 257012, 4134304, 40481087, 40481087, 40481087, 4113008, …
$ condition_status_source_value &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ start_observation             &lt;date&gt; 1954-06-20, 1975-09-14, 1980-09-01, 1964-10-13, 1956-05-07, 1972-01-24, 1935-06-06, 1960-…</code></pre>
</div>
</div>
</div>
</section><section id="addfutureobservation" class="slide level2"><h2>addFutureObservation()</h2>
</section><section id="addfutureobservation-1" class="slide level2"><h2>addFutureObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-30-1.png" width="960" class="r-stretch"></section><section id="addfutureobservation-2" class="slide level2"><h2>addFutureObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-31-1.png" width="960" class="r-stretch"></section><section id="addfutureobservation-3" class="slide level2"><h2>addFutureObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-32-1.png" width="960" class="r-stretch"></section><section id="addfutureobservation-4" class="slide level2"><h2>addFutureObservation()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addFutureObservation.html">addFutureObservation</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_013_1718807109&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date future_observation
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                       &lt;int&gt;
 1                    1        280 1995-11-27        1995-11-27                    8590
 2                    1        393 1961-11-20        1961-11-20                   20869
 3                    1       2156 1994-04-03        1994-04-03                    9118
 4                    1       2392 1932-08-18        1932-08-18                   31618
 5                    1       3761 1980-08-27        1980-08-27                   13821
 6                    1       4764 2005-06-11        2005-06-11                    4827
 7                    2         97 1952-12-28        1952-12-28                   23983
 8                    2        163 2005-12-17        2005-12-17                    4588
 9                    2        183 1998-11-01        1998-11-01                    7440
10                    2        338 1974-09-29        1974-09-29                   16285
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addinobservation" class="slide level2"><h2>addInObservation()</h2>
</section><section id="addinobservation-1" class="slide level2"><h2>addInObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-35-1.png" width="960" class="r-stretch"></section><section id="addinobservation-2" class="slide level2"><h2>addInObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch"></section><section id="addinobservation-3" class="slide level2"><h2>addInObservation()</h2>

<img data-src="training_files/figure-revealjs/unnamed-chunk-37-1.png" width="960" class="r-stretch"></section><section id="addinobservation-4" class="slide level2"><h2>addInObservation()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">condition_occurrence</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addInObservation.html">addInObservation</a></span><span class="op">(</span>indexDate <span class="op">=</span> <span class="st">"condition_start_date"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">in_observation</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"condition_concept_id"</span>, <span class="st">"person_id"</span>, <span class="st">"condition_start_date"</span>, <span class="st">"in_observation"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 4]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   condition_concept_id person_id condition_start_date in_observation
                  &lt;int&gt;     &lt;int&gt; &lt;date&gt;                        &lt;int&gt;
 1              4029498       539 1933-03-26                        0
 2                80180       156 2019-01-30                        0
 3              4029498       211 1967-10-12                        0
 4                80180       588 2019-06-08                        0
 5                80180       339 2019-06-21                        0
 6                80180       220 2019-05-15                        0
 7                80180       843 2017-09-04                        0
 8                80180       884 2017-09-16                        0
 9                80180      1100 2019-05-08                        0
10                80180       814 2019-05-24                        0
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addinobservation-window" class="slide level2"><h2>addInObservation() window</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addInObservation.html">addInObservation</a></span><span class="op">(</span></span>
<span>    indexDate <span class="op">=</span> <span class="st">"cohort_start_date"</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"20yr"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7300</span>, <span class="fl">7665</span><span class="op">)</span>, <span class="st">"40yr"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14600</span>, <span class="fl">14965</span><span class="op">)</span>, <span class="st">"60yr"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">21900</span>, <span class="fl">22265</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    completeInterval <span class="op">=</span> <span class="cn">T</span>, </span>
<span>    nameStyle <span class="op">=</span> <span class="st">"obs_{window_name}"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_015_1718807111&gt; [?? x 7]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date obs_20yr obs_40yr obs_60yr
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;             &lt;int&gt;    &lt;int&gt;    &lt;int&gt;
 1                    1        280 1995-11-27        1995-11-27             1        0        0
 2                    1        393 1961-11-20        1961-11-20             1        1        0
 3                    1       2156 1994-04-03        1994-04-03             1        0        0
 4                    1       2392 1932-08-18        1932-08-18             1        1        1
 5                    1       3761 1980-08-27        1980-08-27             1        0        0
 6                    1       4764 2005-06-11        2005-06-11             0        0        0
 7                    2         97 1952-12-28        1952-12-28             1        1        1
 8                    2        163 2005-12-17        2005-12-17             0        0        0
 9                    2        183 1998-11-01        1998-11-01             0        0        0
10                    2        338 1974-09-29        1974-09-29             1        1        0
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="your-turn-1" class="slide level2"><h2>Your turn</h2>
<p>Can you find out number of record with prior observation greater than 365 days in condition occurrence table using condition_start_date as index date?</p>
</section><section id="solution-1" class="slide level2"><h2>Solution</h2>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">condition_occurrence</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addPriorObservation.html">addPriorObservation</a></span><span class="op">(</span>indexDate <span class="op">=</span> <span class="st">"condition_start_date"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">prior_observation</span> <span class="op">&gt;</span> <span class="fl">365</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
  count
  &lt;dbl&gt;
1 63608</code></pre>
</div>
</div>
</section><section id="adddateofbirth" class="slide level2"><h2>addDateOfBirth()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addDateOfBirth.html">addDateOfBirth</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_017_1718807112&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date date_of_birth
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;date&gt;       
 1                    1        155 2016-01-23        2016-01-23      1954-05-07   
 2                    1        393 1961-11-20        1961-11-20      1957-01-09   
 3                    1       2156 1994-04-03        1994-04-03      1964-07-23   
 4                    1       2392 1932-08-18        1932-08-18      1916-02-04   
 5                    1       3761 1980-08-27        1980-08-27      1956-04-21   
 6                    1       4764 2005-06-11        2005-06-11      1968-08-21   
 7                    2         81 1995-03-01        1995-03-01      1956-03-21   
 8                    2         97 1952-12-28        1952-12-28      1943-07-19   
 9                    2        163 2005-12-17        2005-12-17      1966-06-28   
10                    2        183 1998-11-01        1998-11-01      1974-10-24   
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="adddemographics" class="slide level2"><h2>addDemographics()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addDemographics.html">addDemographics</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_018_1718807112&gt; [?? x 8]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date   age sex    prior_observation future_observation
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;int&gt; &lt;chr&gt;              &lt;int&gt;              &lt;int&gt;
 1                    1        280 1995-11-27        1995-11-27         57 Female             20849               8590
 2                    1        393 1961-11-20        1961-11-20          4 Female              1776              20869
 3                    1       2156 1994-04-03        1994-04-03         29 Female             10846               9118
 4                    1       2392 1932-08-18        1932-08-18         16 Female              6040              31618
 5                    1       3761 1980-08-27        1980-08-27         24 Female              8894              13821
 6                    1       4764 2005-06-11        2005-06-11         36 Male               13443               4827
 7                    2         97 1952-12-28        1952-12-28          9 Female              3450              23983
 8                    2        163 2005-12-17        2005-12-17         39 Female             14417               4588
 9                    2        183 1998-11-01        1998-11-01         24 Male                8774               7440
10                    2        338 1974-09-29        1974-09-29          7 Female              2720              16285
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="adddemographics-1" class="slide level2"><h2>addDemographics()</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addDemographics.html">addDemographics</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    ageGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"child"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">17</span><span class="op">)</span>, <span class="st">"adults"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    sex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    priorObservation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    priorObservationName <span class="op">=</span> <span class="st">"observation_start"</span>,</span>
<span>    priorObservationType <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    futureObservation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    futureObservationName <span class="op">=</span> <span class="st">"observation_end"</span>,</span>
<span>    futureObservationType <span class="op">=</span> <span class="st">"date"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_019_1718807113&gt; [?? x 8]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date   age age_group observation_start observation_end
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;int&gt; &lt;chr&gt;     &lt;date&gt;            &lt;date&gt;         
 1                    1        280 1995-11-27        1995-11-27         57 adults    1938-10-28        2019-06-04     
 2                    1        393 1961-11-20        1961-11-20          4 child     1957-01-09        2019-01-09     
 3                    1       2156 1994-04-03        1994-04-03         29 adults    1964-07-23        2019-03-21     
 4                    1       2392 1932-08-18        1932-08-18         16 child     1916-02-04        2019-03-13     
 5                    1       3761 1980-08-27        1980-08-27         24 adults    1956-04-21        2018-06-30     
 6                    1       4764 2005-06-11        2005-06-11         36 adults    1968-08-21        2018-08-29     
 7                    2         97 1952-12-28        1952-12-28          9 child     1943-07-19        2018-08-27     
 8                    2        163 2005-12-17        2005-12-17         39 adults    1966-06-28        2018-07-10     
 9                    2        183 1998-11-01        1998-11-01         24 adults    1974-10-24        2019-03-16     
10                    2        338 1974-09-29        1974-09-29          7 child     1967-04-19        2019-05-01     
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="record-cohort-attrition" class="slide level2"><h2>record cohort attrition</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 7
  cohort_definition_id number_records number_subjects reason_id reason                    excluded_records excluded_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;             &lt;int&gt;
1                    1            939             786         1 Initial qualifying events                0                 0
2                    2          17268            2686         1 Initial qualifying events                0                 0
3                    3            825             812         1 Initial qualifying events                0                 0
4                    4          19032            2688         1 Initial qualifying events                0                 0</code></pre>
</div>
</div>
</div>
</section><section id="record-cohort-attrition-1" class="slide level2"><h2>record cohort attrition</h2>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">new_sinusitis</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html">addSex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"Female"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"sex"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">compute</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"new_sinusitis"</span>, temporary <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">recordCohortAttrition</span><span class="op">(</span><span class="st">"Restrict to Females"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">new_sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 7
  cohort_definition_id number_records number_subjects reason_id reason                    excluded_records excluded_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;             &lt;int&gt;
1                    1            939             786         1 Initial qualifying events                0                 0
2                    1            494             418         2 Restrict to Females                    445               368
3                    2          17268            2686         1 Initial qualifying events                0                 0
4                    2           8824            1371         2 Restrict to Females                   8444              1315
5                    3            825             812         1 Initial qualifying events                0                 0
6                    3            427             424         2 Restrict to Females                    398               388
7                    4          19032            2688         1 Initial qualifying events                0                 0
8                    4           9745            1371         2 Restrict to Females                   9287              1317</code></pre>
</div>
</div>
</div>
</section><section id="record-cohort-attrition-2" class="slide level2"><h2>record cohort attrition</h2>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">new_sinusitis</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">new_sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">18</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"age"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">compute</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"new_sinusitis"</span>, temporary <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">recordCohortAttrition</span><span class="op">(</span><span class="st">"Restrict to under 18"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">new_sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 7
   cohort_definition_id number_records number_subjects reason_id reason                    excluded_records excluded_subjects
                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;             &lt;int&gt;
 1                    1            939             786         1 Initial qualifying events                0                 0
 2                    1            494             418         2 Restrict to Females                    445               368
 3                    1            154             147         3 Restrict to under 18                   340               271
 4                    2          17268            2686         1 Initial qualifying events                0                 0
 5                    2           8824            1371         2 Restrict to Females                   8444              1315
 6                    2           2623            1182         3 Restrict to under 18                  6201               189
 7                    3            825             812         1 Initial qualifying events                0                 0
 8                    3            427             424         2 Restrict to Females                    398               388
 9                    3            154             154         3 Restrict to under 18                   273               270
10                    4          19032            2688         1 Initial qualifying events                0                 0
11                    4           9745            1371         2 Restrict to Females                   9287              1317
12                    4           2931            1221         3 Restrict to under 18                  6814               150</code></pre>
</div>
</div>
</div>
</section><section id="cohortcount-are-also-updated" class="slide level2"><h2>cohortCount are also updated</h2>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">new_sinusitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  cohort_definition_id number_records number_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;
1                    1            154             147
2                    2           2623            1182
3                    3            154             154
4                    4           2931            1221</code></pre>
</div>
</div>
</section><section id="your-turn-2" class="slide level2"><h2>Your turn</h2>
<p>Can you create a new cohort starting with all bronchitis concept set (258780, 260139) records.</p>
<p>Then restrict the records to ones with:</p>
<p>1- Just Male</p>
<p>2- 25 or above</p>
<p>3- With at least 365 days of prior observation</p>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 7
  cohort_definition_id number_records number_subjects reason_id reason                          excluded_records excluded_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                      &lt;int&gt;             &lt;int&gt;
1                    1           8232            2546         1 Initial qualifying events                      0                 0
2                    1           4115            1245         2 Just Male                                   4117              1301
3                    1           2235            1039         3 25 or above                                 1880               206
4                    1           2235            1039         4 At least 365 days of prior obs…                0                 0</code></pre>
</div>
</div>
</div>
</section><section id="solution-2" class="slide level2"><h2>Solution</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html">generateConceptCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>, </span>
<span>  name <span class="op">=</span> <span class="st">"bronchitis"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>bronchitis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">258780</span>, <span class="fl">260139</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  end <span class="op">=</span> <span class="fl">0</span>, </span>
<span>  limit <span class="op">=</span> <span class="st">"all"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">bronchitis</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">bronchitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html">addSex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"Male"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"sex"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">compute</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"bronchitis"</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">recordCohortAttrition</span><span class="op">(</span><span class="st">"Just Male"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html">addAge</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"age"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">compute</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"bronchitis"</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">recordCohortAttrition</span><span class="op">(</span><span class="st">"25 or above"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addPriorObservation.html">addPriorObservation</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">prior_observation</span> <span class="op">&gt;=</span> <span class="fl">365</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">"prior_observation"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">compute</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"bronchitis"</span>, temporary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">recordCohortAttrition</span><span class="op">(</span><span class="st">"At least 365 days of prior observation"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">bronchitis</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 7
  cohort_definition_id number_records number_subjects reason_id reason                          excluded_records excluded_subjects
                 &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                                      &lt;int&gt;             &lt;int&gt;
1                    1           8232            2546         1 Initial qualifying events                      0                 0
2                    1           4115            1245         2 Just Male                                   4117              1301
3                    1           2235            1039         3 25 or above                                 1880               206
4                    1           2235            1039         4 At least 365 days of prior obs…                0                 0</code></pre>
</div>
</div>
</div>
</section><section id="add-intersections-overview" class="slide level2"><h2>add intersections overview</h2>
<h3 id="origin-table">origin table</h3>
<ul>
<li class="fragment"><p><code>indexDate</code> Column that indicates the “origin” date.</p></li>
<li class="fragment"><p><code>window</code> Window list to specify the interest interval from the <code>indexDate</code>.</p></li>
<li class="fragment"><p><code>censorDate</code> Column that indicates the “end” of followup.</p></li>
</ul></section><section id="add-intersections-overview-1" class="slide level2"><h2>add intersections overview</h2>
<h3 id="target">target</h3>
<ul>
<li class="fragment"><p>Cohort: <code>targetCohortTable</code> + <code>targetCohortId</code> + (<code>targetStartDate</code>)</p></li>
<li class="fragment"><p>Concept: <code>conceptSet</code> + (<code>targetStartDate</code>)</p></li>
<li class="fragment"><p>Table: <code>tableName</code> + (<code>targetStartDate</code>)</p></li>
</ul></section><section id="add-intersections-overview-2" class="slide level2"><h2>add intersections overview</h2>
<h3 id="estimate">Estimate</h3>
<ul>
<li class="fragment"><p><code>flag</code>: NA, 0, 1 (extra argument: <code>targetEndDate</code>)</p></li>
<li class="fragment"><p><code>count</code>: NA/integer (extra argument: <code>targetEndDate</code>)</p></li>
<li class="fragment"><p><code>date</code>: NA/date (extra argument: <code>order</code>)</p></li>
<li class="fragment"><p><code>days</code>: NA/integer (extra argument: <code>order</code>)</p></li>
</ul></section><section id="functions" class="slide level2"><h2>12 functions</h2>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectFlag.html">addCohortIntersectFlag</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectCount.html">addCohortIntersectCount</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addConceptIntersectFlag.html">addConceptIntersectFlag</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addConceptIntersectCount.html">addConceptIntersectCount</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectFlag.html">addTableIntersectFlag</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectCount.html">addTableIntersectCount</a></p></li>
</ul>
</div><div class="column" style="width:10%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:45%;">
<ul>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectDays.html">addCohortIntersectDays</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectDate.html">addCohortIntersectDate</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addConceptIntersectDays.html">addConceptIntersectDays</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addConceptIntersectDate.html">addConceptIntersectDate</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectDays.html">addTableIntersectDays</a></p></li>
<li class="fragment"><p><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectDate.html">addTableIntersectDate</a></p></li>
</ul>
</div>
</div>
</section><section id="lets-create-some-useful-cohorts" class="slide level2"><h2>Let’s create some useful cohorts</h2>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html">generateConceptCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>, </span>
<span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"myocardial_infarction"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4329847</span><span class="op">)</span>,</span>
<span>    <span class="st">"fracture"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4048695</span>, <span class="fl">4142905</span>, <span class="fl">4278672</span>, <span class="fl">4237458</span>, <span class="fl">4230399</span>, <span class="fl">40480160</span>, <span class="fl">4066995</span>, <span class="fl">4059173</span>, <span class="fl">4134304</span><span class="op">)</span>,</span>
<span>    <span class="st">"allergy"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4084167</span>, <span class="fl">40486433</span>, <span class="fl">4280726</span>, <span class="fl">4048171</span><span class="op">)</span>,</span>
<span>    <span class="st">"infection"</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4116491</span>, <span class="fl">433125</span>, <span class="fl">4056621</span>, <span class="fl">40481087</span>, <span class="fl">4112343</span><span class="op">)</span>,</span>
<span>    <span class="st">"pneumonia"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">255848</span><span class="op">)</span>,</span>
<span>    <span class="st">"asthma"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4051466</span>, <span class="fl">317009</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  limit <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  end <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"conditions"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html">generateConceptCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>, </span>
<span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"antineoplastic_and_immunomodulating_agents"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1118088</span>, <span class="fl">1118084</span>, <span class="fl">40224132</span>, <span class="fl">19010482</span>, <span class="fl">40224805</span>, <span class="fl">19007333</span>, <span class="fl">1500211</span>, <span class="fl">1305058</span>, <span class="fl">1503184</span>, <span class="fl">19134077</span>, <span class="fl">1549786</span><span class="op">)</span>,</span>
<span>    <span class="st">"musculoskeletal_system"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1118088</span>, <span class="fl">1557272</span>, <span class="fl">40162359</span>, <span class="fl">1124300</span>, <span class="fl">1115008</span>, <span class="fl">40173590</span>, <span class="fl">1118084</span>, <span class="fl">42707627</span>, <span class="fl">19019273</span>, <span class="fl">19019979</span>, <span class="fl">19078461</span>, <span class="fl">19003953</span>, <span class="fl">1112807</span>, <span class="fl">1115171</span>, <span class="fl">1177480</span><span class="op">)</span>,</span>
<span>    <span class="st">"antiinfectives_for_systemic_use"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">19129655</span>, <span class="fl">1728416</span>, <span class="fl">920293</span>, <span class="fl">19074841</span>, <span class="fl">920300</span>, <span class="fl">920334</span>, <span class="fl">19074843</span>, <span class="fl">19075001</span>, <span class="fl">19073183</span>, <span class="fl">19073188</span>, <span class="fl">1713671</span>, <span class="fl">1729720</span>, <span class="fl">19006318</span>, <span class="fl">1778162</span>, <span class="fl">46275444</span>, <span class="fl">1717327</span>, <span class="fl">1738521</span>, <span class="fl">1741122</span>, <span class="fl">1759842</span>, <span class="fl">1713332</span>, <span class="fl">1746114</span>, <span class="fl">1768849</span>, <span class="fl">46233710</span>, <span class="fl">19133873</span>, <span class="fl">46233988</span>, <span class="fl">19133905</span><span class="op">)</span>,</span>
<span>    <span class="st">"nervous_system"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">708298</span>, <span class="fl">701322</span>, <span class="fl">723013</span>, <span class="fl">1129625</span>, <span class="fl">1110410</span>, <span class="fl">753626</span>, <span class="fl">1124957</span>, <span class="fl">1102527</span>, <span class="fl">1125315</span>, <span class="fl">782043</span>, <span class="fl">791967</span>, <span class="fl">1119510</span>, <span class="fl">19078219</span>, <span class="fl">757627</span>, <span class="fl">40220386</span>, <span class="fl">740275</span>, <span class="fl">40223774</span>, <span class="fl">1154029</span>, <span class="fl">1127078</span>, <span class="fl">1127433</span>, <span class="fl">40222846</span>, <span class="fl">19057271</span>, <span class="fl">40223768</span>, <span class="fl">45892894</span>, <span class="fl">705944</span>, <span class="fl">715997</span>, <span class="fl">19078924</span>, <span class="fl">19076374</span>, <span class="fl">19077572</span>, <span class="fl">40229134</span>, <span class="fl">19059056</span>, <span class="fl">19016749</span>, <span class="fl">40236446</span>, <span class="fl">19074679</span>, <span class="fl">742185</span>, <span class="fl">40231925</span>, <span class="fl">1112807</span>, <span class="fl">35605858</span>, <span class="fl">40162522</span>, <span class="fl">782047</span>, <span class="fl">19039298</span>, <span class="fl">19059528</span>, <span class="fl">836654</span>, <span class="fl">836659</span>, <span class="fl">19115351</span>, <span class="fl">19023398</span>, <span class="fl">19002770</span>, <span class="fl">19123231</span>, <span class="fl">19133768</span>, <span class="fl">40165015</span><span class="op">)</span>,</span>
<span>    <span class="st">"dermatologicals"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1129625</span>, <span class="fl">1149380</span>, <span class="fl">1124300</span>, <span class="fl">836654</span>, <span class="fl">1595799</span>, <span class="fl">975125</span>, <span class="fl">19008572</span><span class="op">)</span>,</span>
<span>    <span class="st">"respiratory_system"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1129625</span>, <span class="fl">1149196</span>, <span class="fl">1149380</span>, <span class="fl">1150770</span>, <span class="fl">1150836</span>, <span class="fl">1153428</span>, <span class="fl">1107830</span>, <span class="fl">1110410</span>, <span class="fl">738818</span>, <span class="fl">1124957</span>, <span class="fl">40169216</span>, <span class="fl">1125443</span>, <span class="fl">1119510</span>, <span class="fl">1137529</span>, <span class="fl">1154615</span>, <span class="fl">1154343</span>, <span class="fl">40223821</span>, <span class="fl">19019979</span>, <span class="fl">19112599</span>, <span class="fl">40223834</span>, <span class="fl">43012036</span>, <span class="fl">40229134</span>, <span class="fl">19029476</span>, <span class="fl">19078461</span>, <span class="fl">40232448</span>, <span class="fl">1177480</span>, <span class="fl">1192710</span>, <span class="fl">1343916</span>, <span class="fl">1150771</span>, <span class="fl">1150837</span>, <span class="fl">1107882</span>, <span class="fl">975125</span>, <span class="fl">1174888</span>, <span class="fl">40169281</span>, <span class="fl">40228214</span>, <span class="fl">40228230</span>, <span class="fl">19125062</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  limit <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  end <span class="op">=</span> <span class="st">"event_end_date"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"medications"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── # OMOP CDM reference (duckdb) of Synthea synthetic health database ────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• omop tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure,
procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location,
care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary,
domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map,
drug_strength</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• cohort tables: sinusitis, new_sinusitis, bronchitis, conditions, medications</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• achilles tables: -</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• other tables: -</code></pre>
</div>
</div>
</section><section id="lets-create-some-useful-cohorts-1" class="slide level2"><h2>Let’s create some useful cohorts</h2>
<div class="cell">
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/settings.html">settings</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">conditions</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"cohort_definition_id"</span>, <span class="st">"cohort_name"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">conditions</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  cohort_definition_id cohort_name           number_records number_subjects
                 &lt;int&gt; &lt;chr&gt;                          &lt;int&gt;           &lt;int&gt;
1                    1 myocardial_infarction             67              67
2                    2 fracture                        2445            1596
3                    3 allergy                          329             226
4                    4 infection                      27979            2694
5                    5 pneumonia                         52              52
6                    6 asthma                           101             101</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/settings.html">settings</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">medications</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="st">"cohort_definition_id"</span>, <span class="st">"cohort_name"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">medications</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  cohort_definition_id cohort_name                                number_records number_subjects
                 &lt;int&gt; &lt;chr&gt;                                               &lt;int&gt;           &lt;int&gt;
1                    1 antineoplastic_and_immunomodulating_agents           1896            1838
2                    2 musculoskeletal_system                               6114            2686
3                    3 antiinfectives_for_systemic_use                     10377            2630
4                    4 nervous_system                                      18680            2690
5                    5 dermatologicals                                      1005             897
6                    6 respiratory_system                                   4578            2187</code></pre>
</div>
</div>
</div>
</section><section id="addcohortintersectflag" class="slide level2"><h2>addCohortIntersectFlag</h2>
<div class="cell">
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectFlag.html">addCohortIntersectFlag</a></span><span class="op">(</span></span>
<span>    targetCohortTable <span class="op">=</span> <span class="st">"conditions"</span>, </span>
<span>    targetCohortId <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">30</span><span class="op">)</span>, </span>
<span>    nameStyle <span class="op">=</span> <span class="st">"following_infection"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_032_1718807141&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date following_infection
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                        &lt;dbl&gt;
 1                    1        280 1995-11-27        1995-11-27                        0
 2                    1        393 1961-11-20        1961-11-20                        0
 3                    1       2156 1994-04-03        1994-04-03                        0
 4                    1       2392 1932-08-18        1932-08-18                        0
 5                    1       3761 1980-08-27        1980-08-27                        0
 6                    1       4764 2005-06-11        2005-06-11                        0
 7                    2         97 1952-12-28        1952-12-28                        0
 8                    2        163 2005-12-17        2005-12-17                        0
 9                    2        183 1998-11-01        1998-11-01                        0
10                    2        338 1974-09-29        1974-09-29                        0
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addcohortintersectflag-1" class="slide level2"><h2>addCohortIntersectFlag</h2>
<div class="cell">
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectFlag.html">addCohortIntersectFlag</a></span><span class="op">(</span></span>
<span>    targetCohortTable <span class="op">=</span> <span class="st">"conditions"</span>, </span>
<span>    targetCohortId <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">30</span><span class="op">)</span>, </span>
<span>    nameStyle <span class="op">=</span> <span class="st">"following_infection"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cohort_definition_id</span>, <span class="va">following_infection</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">tally</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [8 x 3]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
  cohort_definition_id following_infection     n
                 &lt;int&gt;               &lt;dbl&gt; &lt;dbl&gt;
1                    1                   0   932
2                    1                   1     7
3                    2                   0 17166
4                    2                   1   102
5                    3                   0   818
6                    3                   1     7
7                    4                   0 18916
8                    4                   1   116</code></pre>
</div>
</div>
</section><section id="addcohortintersectflag-2" class="slide level2"><h2>addCohortIntersectFlag</h2>
<div class="cell">
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectFlag.html">addCohortIntersectFlag</a></span><span class="op">(</span></span>
<span>    targetCohortTable <span class="op">=</span> <span class="st">"conditions"</span>, </span>
<span>    targetCohortId <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>    indexDate <span class="op">=</span> <span class="st">"cohort_start_date"</span>, </span>
<span>    censorDate <span class="op">=</span> <span class="st">"cohort_end_date"</span>, </span>
<span>    targetStartDate <span class="op">=</span> <span class="st">"cohort_start_date"</span>, </span>
<span>    targetEndDate <span class="op">=</span> <span class="st">"cohort_start_date"</span>, </span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"short"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">180</span><span class="op">)</span>, <span class="st">"long"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    nameStyle <span class="op">=</span> <span class="st">"{cohort_name}_{window_name}"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 16
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
$ cohort_definition_id        &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,…
$ subject_id                  &lt;int&gt; 97, 163, 183, 338, 351, 358, 387, 403, 479, 479, 480, 480, 636, 677, 677, 789, 918, 933, 939…
$ cohort_start_date           &lt;date&gt; 1952-12-28, 2005-12-17, 1998-11-01, 1974-09-29, 2008-01-27, 1943-08-16, 2011-09-22, 1935-08…
$ cohort_end_date             &lt;date&gt; 1952-12-28, 2005-12-17, 1998-11-01, 1974-09-29, 2008-01-27, 1943-08-16, 2011-09-22, 1935-08…
$ infection_long              &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ infection_short             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ myocardial_infarction_short &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ fracture_short              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ allergy_short               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ pneumonia_short             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ asthma_short                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ myocardial_infarction_long  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ fracture_long               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ allergy_long                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ pneumonia_long              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ asthma_long                 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
</div>
</div>
</section><section id="addtableintersectcount" class="slide level2"><h2>addTableIntersectCount</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectCount.html">addTableIntersectCount</a></span><span class="op">(</span></span>
<span>    tableName <span class="op">=</span> <span class="st">"drug_exposure"</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">365</span><span class="op">)</span>, </span>
<span>    targetEndDate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    nameStyle <span class="op">=</span> <span class="st">"number_prescriptions"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_062_1718807149&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date number_prescriptions
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                         &lt;dbl&gt;
 1                    1        393 1961-11-20        1961-11-20                         2
 2                    1       2392 1932-08-18        1932-08-18                         2
 3                    2         97 1952-12-28        1952-12-28                         2
 4                    2        163 2005-12-17        2005-12-17                         4
 5                    2        358 1943-08-16        1943-08-16                         2
 6                    2        403 1935-08-08        1935-08-08                         2
 7                    2        480 2003-12-09        2003-12-09                         4
 8                    2        969 1992-10-27        1992-10-27                         2
 9                    2       1036 1969-12-12        1969-12-12                         8
10                    2       1285 2013-08-26        2013-08-26                         8
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addcohortintersectdate" class="slide level2"><h2>addCohortIntersectDate</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectDate.html">addCohortIntersectDate</a></span><span class="op">(</span></span>
<span>    targetCohortTable <span class="op">=</span> <span class="st">"conditions"</span>,</span>
<span>    targetCohortId <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>    order <span class="op">=</span> <span class="st">"first"</span>,</span>
<span>    censor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    nameStyle <span class="op">=</span> <span class="st">"next_{cohort_name}"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_070_1718807151&gt; [?? x 5]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date next_infection
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;          &lt;date&gt;        
 1                    1        280 1995-11-27        1995-11-27      1997-06-01    
 2                    1        393 1961-11-20        1961-11-20      1993-11-27    
 3                    1       2156 1994-04-03        1994-04-03      2003-01-29    
 4                    1       2392 1932-08-18        1932-08-18      1937-01-14    
 5                    1       3761 1980-08-27        1980-08-27      1987-06-11    
 6                    1       4764 2005-06-11        2005-06-11      2010-12-31    
 7                    2         97 1952-12-28        1952-12-28      1952-12-28    
 8                    2        163 2005-12-17        2005-12-17      2005-12-17    
 9                    2        183 1998-11-01        1998-11-01      1998-11-01    
10                    2        338 1974-09-29        1974-09-29      1974-09-29    
# ℹ more rows</code></pre>
</div>
</div>
</div>
</section><section id="addconceptintersectdays" class="slide level2"><h2>addConceptIntersectDays</h2>
<div class="cell">
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addConceptIntersectDays.html">addConceptIntersectDays</a></span><span class="op">(</span></span>
<span>    conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>acetaminophen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1125315</span>, <span class="fl">1127078</span>, <span class="fl">1127433</span>, <span class="fl">40229134</span>, <span class="fl">40231925</span>, <span class="fl">40162522</span>, <span class="fl">19133768</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>    nameStyle <span class="op">=</span> <span class="st">"next_{concept_name}"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 5
Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
$ cohort_definition_id &lt;int&gt; 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ subject_id           &lt;int&gt; 280, 393, 2156, 2392, 3761, 97, 163, 351, 358, 403, 479, 480, 636, 677, 918, 939, 969, 1016, 1036, …
$ cohort_start_date    &lt;date&gt; 1995-11-27, 1961-11-20, 1994-04-03, 1932-08-18, 1980-08-27, 1952-12-28, 2005-12-17, 2008-01-27, 19…
$ cohort_end_date      &lt;date&gt; 1995-11-27, 1961-11-20, 1994-04-03, 1932-08-18, 1980-08-27, 1952-12-28, 2005-12-17, 2008-01-27, 19…
$ next_acetaminophen   &lt;dbl&gt; 4786, 266, 7255, 3682, 459, 2460, 259, 3582, 4972, 5976, 4211, 124, 4793, 10529, 2745, 4525, 2197, …</code></pre>
</div>
</div>
</div>
</section><section id="your-turn-3" class="slide level2"><h2>Your turn</h2>
<ul>
<li class="fragment"><p>Can you get the mean count of the prescriptions (from drug exposure table) for patients with cohort_definition_id 2 in the sinusitis table?</p></li>
<li class="fragment"><p>Can you get the mean prior history for each cohort definition in the sinusitis table that has an inflection (from conditions table) any time prior they had sinusitis?</p></li>
</ul></section><section id="solution-3" class="slide level2"><h2>Solution</h2>
<div class="cell">
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectCount.html">addTableIntersectCount</a></span><span class="op">(</span></span>
<span>    tableName <span class="op">=</span> <span class="st">"drug_exposure"</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>    targetEndDate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    nameStyle <span class="op">=</span> <span class="st">"number_prescriptions"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">cohort_definition_id</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_prescription <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">number_prescriptions</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
  mean_prescription
              &lt;dbl&gt;
1              50.6</code></pre>
</div>
</div>
</section><section id="solution-4" class="slide level2"><h2>Solution</h2>
<div class="cell">
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addCohortIntersectFlag.html">addCohortIntersectFlag</a></span><span class="op">(</span></span>
<span>    targetCohortTable <span class="op">=</span> <span class="st">"conditions"</span>,</span>
<span>    targetCohortId <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>    nameStyle <span class="op">=</span> <span class="st">"inflection"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addPriorObservation.html">addPriorObservation</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">inflection</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cohort_definition_id</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_prior_history <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">prior_observation</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [4 x 2]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
  cohort_definition_id mean_prior_history
                 &lt;int&gt;              &lt;dbl&gt;
1                    1             12463.
2                    2             12541.
3                    3             11689.
4                    4             12501.</code></pre>
</div>
</div>
</section><section id="summarise-data" class="slide level2"><h2>Summarise data</h2>
<p>Often we might want to have some simple summary statistics for the cohort table. In PatientProfiles summariseResult can help you to summarise the table and produce some simple statistics for you.</p>
</section><section id="summarise-data-1" class="slide level2"><h2>Summarise data</h2>
<p>Lets add all the information you need the table you need summarizing.</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">sinusitis</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addConceptIntersectFlag.html">addConceptIntersectFlag</a></span><span class="op">(</span></span>
<span>    conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"ibuprofen"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">19019979</span>, <span class="fl">19078461</span>, <span class="fl">1177480</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span><span class="op">)</span>, </span>
<span>    nameStyle <span class="op">=</span> <span class="st">"prior_ibuprofen"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addTableIntersectCount.html">addTableIntersectCount</a></span><span class="op">(</span></span>
<span>    window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>    tableName <span class="op">=</span> <span class="st">"condition_occurrence"</span>, </span>
<span>    nameStyle <span class="op">=</span> <span class="st">"number_conditions"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addDemographics.html">addDemographics</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="summarise-data-2" class="slide level2"><h2>Summarise data</h2>
<div class="cell">
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;og_121_1718807164&gt; [?? x 10]
# Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.3/C:\Users\martics\AppData\Local\Temp\RtmpaC46NE\file9ac843d33dbf.duckdb]
   cohort_definition_id subject_id cohort_start_date cohort_end_date prior_ibuprofen number_conditions   age sex   
                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;                    &lt;dbl&gt;             &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; 
 1                    1        280 1995-11-27        1995-11-27                    1                66    57 Female
 2                    1       2156 1994-04-03        1994-04-03                    1                42    29 Female
 3                    2        163 2005-12-17        2005-12-17                    1                48    39 Female
 4                    2        387 2011-09-22        2011-09-22                    1                34    38 Female
 5                    2        480 2003-03-01        2003-03-01                    1                78    65 Male  
 6                    2        480 2003-12-09        2003-12-09                    1                78    66 Male  
 7                    2        677 1988-01-14        1988-01-14                    1                34    26 Male  
 8                    2        789 2015-02-15        2015-02-15                    1                44    42 Male  
 9                    2       1053 2001-04-17        2001-04-17                    1                50    25 Female
10                    2       1285 2013-08-26        2013-08-26                    1                34    59 Male  
# ℹ more rows
# ℹ 2 more variables: prior_observation &lt;int&gt;, future_observation &lt;int&gt;</code></pre>
</div>
</div>
</section><section id="summarise-data-3" class="slide level2"><h2>Summarise data</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">prior_ibuprofen</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    mean_conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">number_conditions</span><span class="op">)</span>,</span>
<span>    mean_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>    mean_followup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">future_observation</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">collect</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  sex    prior_ibuprofen mean_conditions mean_age mean_followup
  &lt;chr&gt;            &lt;dbl&gt;           &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;
1 Female               1            50.1     39.8         5856.
2 Male                 0            53.3     28.1        12962.
3 Male                 1            49.8     40.6         5752.
4 Female               0            55.3     28.5        13168.</code></pre>
</div>
</div>
</div>
</section><section id="summarise-data-4" class="slide level2"><h2>Summarise data</h2>
<p>In PatientProfile you can use summariseResults to summarise the table for you.</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/summariseResult.html">summariseResult</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="va">x</span>, <span class="co"># table to summarise </span></span>
<span>  strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"prior_ibuprofen"</span><span class="op">)</span><span class="op">)</span>, <span class="co"># strata</span></span>
<span>  includeOverallStrata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"number_conditions"</span>, <span class="st">"age"</span>, <span class="st">"future_observation"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sex"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>, </span>
<span>  estimates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"q25"</span>, <span class="st">"q75"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"percentage"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="summarise-data-5" class="slide level2"><h2>Summarise data</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 93 × 13
   result_id cdm_name     group_name group_level strata_name strata_level variable_name variable_level estimate_name estimate_type
       &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        
 1         1 Synthea syn… overall    overall     overall     overall      number recor… &lt;NA&gt;           count         integer      
 2         1 Synthea syn… overall    overall     overall     overall      number subje… &lt;NA&gt;           count         integer      
 3         1 Synthea syn… overall    overall     overall     overall      number_condi… &lt;NA&gt;           median        numeric      
 4         1 Synthea syn… overall    overall     overall     overall      number_condi… &lt;NA&gt;           q25           numeric      
 5         1 Synthea syn… overall    overall     overall     overall      number_condi… &lt;NA&gt;           q75           numeric      
 6         1 Synthea syn… overall    overall     overall     overall      age           &lt;NA&gt;           median        integer      
 7         1 Synthea syn… overall    overall     overall     overall      age           &lt;NA&gt;           q25           integer      
 8         1 Synthea syn… overall    overall     overall     overall      age           &lt;NA&gt;           q75           integer      
 9         1 Synthea syn… overall    overall     overall     overall      sex           Female         count         integer      
10         1 Synthea syn… overall    overall     overall     overall      sex           Male           count         integer      
# ℹ 83 more rows
# ℹ 3 more variables: estimate_value &lt;chr&gt;, additional_name &lt;chr&gt;, additional_level &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="section" class="title-slide slide level1 end-slide center"><h1></h1>
<div style="margin-bottom: 25px;">

</div>
<div style="margin-bottom: 25px;">

</div>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="images/hexticker.png" style="right: 50%; top: 50%; height: 500; fig-align: center"></p>
</div><div class="column" style="width:65%;">
<div style="margin-top: 135px;">

</div>
<p><span style="font-size: 100px;"><strong>PatientProfiles</strong></span></p>
<div style="margin-bottom: 25px;">

</div>
<p><span style="font-size: 60px; text-align: left; color: grey"><strong>The end</strong></span></p>
<div style="margin-bottom: 25px;">

</div>
<div class="columns">
<div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://cloud.r-project.org/web/packages/PatientProfiles/index.html" style="color: #3a6ea5; text-decoration: underline;"><strong>CRAN</strong></a></p>
</div><div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://cloud.r-project.org/web/packages/PatientProfiles/PatientProfiles.pdf" style="color: #3a6ea5; text-decoration: underline; text-align:center"><strong>Manual</strong></a></p>
</div><div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://github.com/darwin-eu-dev/PatientProfiles/" style="color: #3a6ea5; text-decoration: underline; text-align:center"><strong>GitHub</strong></a></p>
</div><div class="column" style="width:22%;">
<div style="margin-bottom: 25px;">

</div>
<p><a href="https://darwin-eu-dev.github.io/PatientProfiles/" style="color: #3a6ea5; text-decoration: underline; text-align:center"><strong>Website</strong></a></p>
</div><div class="column" style="width:1.2%;">

</div>
</div>
</div>
</div>
<div class="footer footer-default">
<p>Oxford Summer School 2024</p>
</div>
</section>
</div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="training_files/libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="training_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="training_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="training_files/libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="training_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="training_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script><script src="training_files/libs/revealjs/plugin/quarto-support/support.js"></script><script src="training_files/libs/revealjs/plugin/notes/notes.js"></script><script src="training_files/libs/revealjs/plugin/search/search.js"></script><script src="training_files/libs/revealjs/plugin/zoom/zoom.js"></script><script src="training_files/libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 7.0e-2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>


</body></html>